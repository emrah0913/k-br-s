<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getir Kıbrıs - Türkiye'den Kıbrıs'a Teslimat</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    body {
      font-family: 'Inter', sans-serif;
      background-color: #fffefa;
      color: #2b2b2b;
    }
    header {
      background-color: #ffcb05;
      padding: 20px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    header img {
      max-width: 200px;
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 30px;
      background-color: #2b2b2b;
      padding: 15px 0;
    }
    nav a {
      color: #ffffff;
      text-decoration: none;
      font-weight: 600;
      padding: 5px 10px;
      transition: background-color 0.3s ease;
    }
    nav a:hover {
      background-color: #ffcb05;
      color: #2b2b2b;
      border-radius: 5px;
    }
    .hero {
      text-align: center;
      padding: 50px 20px;
      background-color: #f8f8f8;
    }
    .hero h1 {
      font-size: 2.5em;
      color: #ffcb05;
      margin-bottom: 15px;
    }
    .hero p {
      font-size: 1.1em;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto 30px;
    }
    .hero button {
      background-color: #ffcb05;
      color: #2b2b2b;
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .hero button:hover {
      background-color: #e6b800;
    }
    section {
      padding: 40px 20px;
      max-width: 900px;
      margin: 0 auto;
      background-color: #ffffff;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      margin-bottom: 30px;
    }
    section h2 {
      color: #ffcb05;
      text-align: center;
      margin-bottom: 30px;
      font-size: 2em;
    }
    .form-group {
      margin-bottom: 20px;
    }
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
    }
    .form-group input[type="number"],
    .form-group select {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1em;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      background-color: #e9ffe9;
      border: 1px solid #c0f0c0;
      border-radius: 5px;
      text-align: center;
      font-size: 1.2em;
      font-weight: 600;
      color: #338833;
    }
    button {
      background-color: #5d3ebc;
      color: #ffffff;
      padding: 12px 25px;
      border: none;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      transition: background-color 0.3s ease;
      display: block;
      width: 100%;
      margin-top: 20px;
    }
    button:hover {
      background-color: #4b3294;
    }
    footer {
      background-color: #2b2b2b;
      color: #ffffff;
      text-align: center;
      padding: 20px;
      margin-top: 40px;
    }
    .auth-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }
    .auth-buttons button {
      width: auto;
      padding: 8px 15px;
      font-size: 0.9em;
      border-radius: 5px;
    }
    #auth-status {
      text-align: center;
      margin-top: 15px;
      font-weight: 600;
      color: #5d3ebc;
    }
    .hidden {
      display: none !important;
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <header>
    <img src="https://getir.com/images/getir-logo.svg" alt="Getir Kıbrıs Logo" />
  </header>
  <nav>
    <a href="index.html">Anasayfa</a>
    <a href="siparisver.html" id="siparisVerLink" class="hidden">Sipariş Ver</a>
    <a href="siparislerim.html" id="siparislerimLink" class="hidden">Siparişlerim</a>
    <a href="kargotakip.html" id="kargoTakipLink" class="hidden">Kargo Takip</a>
    <a href="admin.html" id="adminLink" class="hidden">Admin Paneli</a>
    <a href="#" id="loginRegisterLink">Giriş Yap / Kayıt Ol</a>
    <a href="#" id="logoutLink" class="hidden">Çıkış Yap</a>
  </nav>

  <div id="auth-status"></div>

  <section class="hero">
    <h1>Türkiye'den Kıbrıs'a Hızlı ve Güvenilir Teslimat</h1>
    <p>Getir Kıbrıs ile Türkiye'den dilediğiniz ürünü kapınıza kadar getirin. Hızlı kargo, uygun fiyatlar ve güvenilir hizmet.</p>
    <button onclick="location.href='siparisver.html'">Hemen Sipariş Ver</button>
  </section>

  <section>
    <h2>Kargo Fiyatı Hesapla</h2>
    <div class="form-group">
      <label for="price">Ürün Fiyatı (TL):</label>
      <input type="number" id="price" placeholder="Ürün fiyatını girin" />
    </div>
    <div class="form-group">
      <label for="category">Ürün Kategorisi:</label>
      <select id="category">
        <option value="mobilya">Mobilya</option>
        <option value="giyim">Giyim</option>
        <option value="elektronik">Elektronik</option>
        <option value="diger">Diğer</option>
      </select>
    </div>
    <div class="form-group">
      <label for="delivery">Teslimat Şekli:</label>
      <select id="delivery">
        <option value="depo">Depodan Alacağım</option>
        <option value="eve">Eve Teslim</option>
      </select>
    </div>
    <div class="form-group" id="citySelect" style="display: none;">
      <label for="city">Şehir:</label>
      <select id="city">
        <option value="lefkoşa">Lefkoşa</option>
        <option value="girne">Girne</option>
        <option value="gazimağusa">Gazimağusa</option>
        <option value="güzelyurt">Güzelyurt</option>
        <option value="iskele">İskele</option>
      </select>
    </div>

    <button onclick="calculate()">Hesapla</button>
    <div class="result" id="result"></div>
  </section>

  <footer>
    &copy; 2025 Getir Kıbrıs. Tüm hakları saklıdır.
  </footer>

  <script>
    // Firebase yapılandırması
    const firebaseConfig = {
      apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
      authDomain: "kibris-6b4f7.firebaseapp.com",
      projectId: "kibris-6b4f7",
      storageBucket: "kibris-6b4f7.firebasestorage.app",
      messagingSenderId: "141262926171",
      appId: "1:141262926171:web:07226845e51d4bbc0dea7e",
      measurementId: "G-JL9P6BRZTD"
    };

    // Firebase'i başlat
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    const delivery = document.getElementById("delivery");
    const citySelect = document.getElementById("citySelect");
    const authStatusDiv = document.getElementById("auth-status");
    const loginRegisterLink = document.getElementById("loginRegisterLink");
    const logoutLink = document.getElementById("logoutLink");
    const siparisVerLink = document.getElementById("siparisVerLink");
    const siparislerimLink = document.getElementById("siparislerimLink");
    const kargoTakipLink = document.getElementById("kargoTakipLink");
    const adminLink = document.getElementById("adminLink");

    const ADMIN_UID = 'JKy2CJircqSgC8ftIx9kY7iHlXC3'; // Admin kullanıcısının UID'si

    delivery.addEventListener("change", () => {
      if (delivery.value === "eve") {
        citySelect.style.display = "block";
      } else {
        citySelect.style.display = "none";
      }
    });

    function calculate() {
      const price = parseFloat(document.getElementById("price").value) || 0;
      const category = document.getElementById("category").value;
      const deliveryType = document.getElementById("delivery").value;
      const city = document.getElementById("city").value;
      let oran = 0;
      let cityPrice = 0;

      switch (category) {
        case "mobilya": oran = 0.7; break;
        case "giyim": oran = 0.45; break;
        case "elektronik": oran = 0.7; break;
        case "diger": oran = 0.5; break; // Diğer kategoriye varsayılan bir oran ekledim
      }

      if (deliveryType === "eve") {
        switch (city) {
          case "lefkoşa": cityPrice = 200; break;
          case "girne": cityPrice = 300; break;
          case "gazimağusa": cityPrice = 250; break;
          case "güzelyurt": cityPrice = 180; break;
          case "iskele": cityPrice = 280; break;
        }
      }

      const total = (price * oran) + cityPrice;
      document.getElementById("result").textContent = `Tahmini Kargo Ücreti: ${total.toFixed(2)} TL`;
    }

    // Oturum durumu izleyicisi
    auth.onAuthStateChanged(user => {
      if (user) {
        authStatusDiv.textContent = `Hoş geldiniz, ${user.email}!`;
        loginRegisterLink.classList.add("hidden");
        logoutLink.classList.remove("hidden");
        siparisVerLink.classList.remove("hidden");
        siparislerimLink.classList.remove("hidden");
        kargoTakipLink.classList.remove("hidden");

        // Admin kontrolü
        if (user.uid === ADMIN_UID) {
          adminLink.classList.remove("hidden");
        } else {
          adminLink.classList.add("hidden");
        }

      } else {
        authStatusDiv.textContent = "Giriş yapmadınız.";
        loginRegisterLink.classList.remove("hidden");
        logoutLink.classList.add("hidden");
        siparisVerLink.classList.add("hidden");
        siparislerimLink.classList.add("hidden");
        kargoTakipLink.classList.add("hidden");
        adminLink.classList.add("hidden");
      }
    });

    // Çıkış yapma fonksiyonu
    logoutLink.addEventListener("click", (e) => {
      e.preventDefault();
      auth.signOut().then(() => {
        showToast("Başarıyla çıkış yapıldı.");
      }).catch((error) => {
        showToast("Çıkış yapılırken hata oluştu: " + error.message);
      });
    });

    // Giriş/Kayıt Linki için basılı tutma özelliği
    let longPressTimer;
    loginRegisterLink.addEventListener('mousedown', (e) => {
      longPressTimer = setTimeout(() => {
        const email = prompt("Lütfen e-posta adresinizi girin:");
        const password = prompt("Lütfen şifrenizi girin:");

        if (email && password) {
          auth.signInWithEmailAndPassword(email, password)
            .then((userCredential) => {
              showToast("Giriş başarılı!");
            })
            .catch((error) => {
              if (error.code === 'auth/user-not-found' || error.code === 'auth/wrong-password') {
                // Kullanıcı bulunamazsa veya şifre yanlışsa kayıt olmaya çalış
                auth.createUserWithEmailAndPassword(email, password)
                  .then((userCredential) => {
                    showToast("Kayıt başarılı ve oturum açıldı!");
                  })
                  .catch((registerError) => {
                    showToast("Kayıt olunamadı: " + registerError.message);
                    console.error("Kayıt hatası:", registerError);
                  });
              } else {
                showToast("Giriş yapılamadı: " + error.message);
                console.error("Giriş hatası:", error);
              }
            });
        }
      }, 1000); // 1 saniye basılı tutma süresi
    });

    loginRegisterLink.addEventListener('mouseup', () => {
      clearTimeout(longPressTimer);
    });

    loginRegisterLink.addEventListener('mouseleave', () => {
      clearTimeout(longPressTimer);
    });

    // Toast bildirimi fonksiyonu (diğer sayfalarda da kullanılacak)
    window.showToast = function(message) {
        let toast = document.getElementById('toast');
        if (!toast) {
            toast = document.createElement('div');
            toast.id = 'toast';
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%);
                background-color: #333;
                color: #fff;
                padding: 10px 20px;
                border-radius: 5px;
                opacity: 0;
                transition: opacity 0.5s ease-in-out;
                z-index: 1000;
            `;
            document.body.appendChild(toast);
        }
        toast.textContent = message;
        toast.classList.remove('opacity-0');
        toast.classList.add('opacity-100');
        setTimeout(() => {
            toast.classList.remove('opacity-100');
            toast.classList.add('opacity-0');
        }, 3000); // 3 saniye sonra kaybol
    };

  </script>
</body>
</html>
