<!-- [Tüm dosyanın tamamı, üstteki mantıkla, Google ile Giriş Yap butonuyla birlikte] -->
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Kıbrıs Online</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@700&display=swap" rel="stylesheet">
  <style>
    /* [STYLE KISMI DEĞİŞMEDİ] */
    /* ...style'ı tekrar eklemedim, yukarıdaki kodla aynı... */
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-main">
      <div class="logo">
        <span class="logo-icon">
          <svg viewBox="0 0 24 24"><path d="M4.5 18.5c0-.83.67-1.5 1.5-1.5h12c.83 0 1.5.67 1.5 1.5v.5h.5a2.5 2.5 0 0 0 2.5-2.5V14h-19v2.5A2.5 2.5 0 0 0 3.5 19h1v-.5zm15-8.5l-3-7H7.5l-3 7H20.5zM5.5 12h13l-1.5-3.5h-10L5.5 12z"></path></svg>
        </span>
        Kıbrıs Online
      </div>
      <div class="menu">
        <button class="menu-btn" id="btn-siparisver">Sipariş Ver</button>
        <button class="menu-btn" id="btn-siparislerim">Siparişlerim</button>
        <button class="menu-btn" id="btn-kargotakip">Kargo Takip</button>
        <!-- GİRİŞ YAPILMAMIŞSA GÖRÜNECEK BUTON -->
        <button style="margin-left:16px;display:none" class="menu-btn" id="google-login-btn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="" style="width:24px;vertical-align:middle;margin-right:7px;margin-top:-2px;">
          Google ile Giriş Yap
        </button>
        <!-- GİRİŞ YAPILDIYSA PROFİL BLOKU -->
        <div class="profile-area" id="profile-area" style="display:none">
          <img src="" alt="Profil Fotoğrafı" class="profile-img" id="profile-img">
          <span class="profile-name" id="profile-name"></span>
          <button class="logout-btn" id="logout-btn">Çıkış Yap</button>
        </div>
      </div>
    </div>
  </header>
  <!-- ...devamı aynı şekilde... -->
  <!-- HERO, MARKETPLACES, CALCULATOR, INFO, FOOTER, POPUP ve JS script'leri -->
  <!-- Tüm dosyanın kalan kısmı önceki kodlarla aynı şekilde devam edecek -->
  <!-- Sadece header ve JS kısmı değişti, diğer bölümler değişmedi -->
  <!-- ... -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
      authDomain: "kibris-6b4f7.firebaseapp.com",
      projectId: "kibris-6b4f7",
      storageBucket: "kibris-6b4f7.firebasestorage.app",
      messagingSenderId: "141262926171",
      appId: "1:141262926171:web:07226845e51d4bbc0dea7e",
      measurementId: "G-JL9P6BRZTD"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    let currentUser = null;

    const profileArea = document.getElementById('profile-area');
    const profileImg = document.getElementById('profile-img');
    const profileName = document.getElementById('profile-name');
    const logoutBtn = document.getElementById('logout-btn');
    const googleLoginBtn = document.getElementById('google-login-btn');
    const menuBtns = [
      document.getElementById('btn-siparisver'),
      document.getElementById('btn-siparislerim'),
      document.getElementById('btn-kargotakip')
    ];

    // Uyarı Popup
    function showPopup(msg) {
      document.getElementById('popup-msg').textContent = msg;
      document.getElementById('popup-bg').classList.add('show');
    }
    document.getElementById('popup-btn').onclick = () =>
      document.getElementById('popup-bg').classList.remove('show');

    function updateProfileUI(user) {
      if (user) {
        profileImg.src = user.photoURL;
        profileName.textContent = user.displayName;
        profileArea.style.display = 'flex';
        googleLoginBtn.style.display = 'none';
      } else {
        profileArea.style.display = 'none';
        googleLoginBtn.style.display = 'inline-flex';
      }
    }
    // Google ile Giriş Yap butonu
    googleLoginBtn.onclick = function() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .catch(() => showPopup("Giriş işlemi iptal edildi veya başarısız oldu."));
    };
    // Menü butonları
    menuBtns[0].onclick = function(e) {
      if (!currentUser) {
        showPopup("Lütfen giriş yapınız");
        e.preventDefault();
      } else {
        window.location.href = "siparisver.html";
      }
    };
    menuBtns[1].onclick = function(e) {
      if (!currentUser) {
        showPopup("Lütfen giriş yapınız");
        e.preventDefault();
      } else {
        window.location.href = "siparislerim.html";
      }
    };
    menuBtns[2].onclick = function(e) {
      if (!currentUser) {
        showPopup("Lütfen giriş yapınız");
        e.preventDefault();
      } else {
        window.location.href = "kargotakip.html";
      }
    };
    logoutBtn.onclick = function() {
      auth.signOut();
      showPopup("Çıkış yapıldı");
      setTimeout(() => window.location.reload(), 500);
    };

    // Otomatik Google giriş popup'ı
    let firstAuthCheck = true;
    auth.onAuthStateChanged(user => {
      currentUser = user;
      updateProfileUI(user);
      if (!user && firstAuthCheck) {
        firstAuthCheck = false;
        googleLoginBtn.click();
      }
    });
  </script>
  <!-- ...diğer kodlar aynı şekilde devam eder... -->
</body>
</html>
