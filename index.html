<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Kıbrıs Online</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body { margin:0; font-family:'Inter',sans-serif; background:#f6faff; }
    .header {
      display:flex; align-items:center; justify-content:space-between;
      background:#fff; box-shadow:0 2px 16px #d9e7fa33;
      border-radius:0 0 18px 18px;
      padding:12px 18px;
    }
    .logo {
      font-family:'Poppins',sans-serif; font-size:2rem; font-weight:700;
      color:#1e88e5; letter-spacing:1px; user-select:none;
    }
    .user-actions {
      display:flex; align-items:center; gap:13px;
    }
    .google-login-btn {
      background:transparent; border:none; cursor:pointer;
      display:flex; align-items:center; gap:7px;
      font-size:1rem; font-weight:600; color:#333;
      padding:7px 10px; border-radius:7px; transition:background 0.17s;
    }
    .google-login-btn:hover { background:#eaf3fe; }
    .google-logo {
      width:32px; height:32px; border-radius:50%; background:#fff;
      box-shadow:0 1px 6px #1565c01a; padding:2px;
      border:1.5px solid #e0e4f5;
      object-fit:cover;
    }
    .profile-info {
      display:flex; align-items:center; gap:9px; background:#e3f0fe;
      border-radius:14px; padding:7px 13px; box-shadow:0 2px 8px #1e88e511;
    }
    .profile-img {
      width:32px; height:32px; border-radius:50%; object-fit:cover;
      border:2px solid #d3e3fa; background:#e2e9f4;
    }
    .profile-name {
      font-weight:600; color:#1e88e5; font-size:1rem;
      white-space:nowrap; text-overflow:ellipsis; max-width:120px; overflow:hidden;
    }
    .logout-btn {
      background:transparent; color:#1565c0; border:none; border-radius:7px;
      padding:7px 12px; font-weight:700; cursor:pointer; font-size:1rem;
      margin-left:2px; transition:color 0.18s, background 0.16s;
    }
    .logout-btn:hover { background:#d6e6fa; color:#104b8c; }
    @media (max-width:600px) {
      .header { flex-direction:column; align-items:flex-start; padding:6px 6vw;}
      .logo { font-size:1.2rem;}
      .profile-info {padding:5px 6px;}
      .profile-img { width:28px; height:28px;}
      .logout-btn, .google-login-btn { font-size:.98rem; padding:6px 9px;}
      .google-logo { width:28px; height:28px;}
    }
  </style>
</head>
<body>
  <div class="header">
    <span class="logo">Kıbrıs Online</span>
    <div class="user-actions">
      <button class="google-login-btn" id="google-login-btn" style="display:flex;">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="google-logo" alt="Google ile Giriş Yap">
        <span>Giriş Yap</span>
      </button>
      <span id="profile-box" style="display:none;">
        <span class="profile-info">
          <img src="" id="profile-img" class="profile-img" alt="Profil Fotoğrafı">
          <span class="profile-name" id="profile-name"></span>
          <button class="logout-btn" id="logout-btn">Çıkış</button>
        </span>
      </span>
    </div>
  </div>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
  <script>
    // Firebase config (senin verdiğinle aynı)
    const firebaseConfig = {
      apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
      authDomain: "kibris-6b4f7.firebaseapp.com",
      projectId: "kibris-6b4f7",
      storageBucket: "kibris-6b4f7.firebasestorage.app",
      messagingSenderId: "141262926171",
      appId: "1:141262926171:web:07226845e51d4bbc0dea7e",
      measurementId: "G-JL9P6BRZTD"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const loginBtn = document.getElementById('google-login-btn');
    const profileBox = document.getElementById('profile-box');
    const profileImg = document.getElementById('profile-img');
    const profileName = document.getElementById('profile-name');
    const logoutBtn = document.getElementById('logout-btn');

    function showProfile(user) {
      profileImg.src = user.photoURL;
      profileName.textContent = user.displayName;
      profileBox.style.display = 'inline-block';
      loginBtn.style.display = 'none';
    }
    function hideProfile() {
      profileBox.style.display = 'none';
      loginBtn.style.display = 'flex';
    }

    // Giriş butonu tıklandığında popup ile Google Sign-In
    loginBtn.onclick = function() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .catch(err => {
          alert("Giriş başarısız: " + (err.message || err));
          console.log(err);
        });
    };
    // Çıkış
    logoutBtn.onclick = function() {
      auth.signOut();
    };
    // Otomatik giriş izleme
    let firstCheck = true;
    auth.onAuthStateChanged(function(user){
      if(user){
        showProfile(user);
      }else{
        hideProfile();
        if(firstCheck) {
          firstCheck = false;
          // Otomatik popup aç (isteğe bağlı, kaldırmak istersen aşağıdaki satırı kaldır)
          loginBtn.click();
        }
      }
    });
  </script>
</body>
</html>
