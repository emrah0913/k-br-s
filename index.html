<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Kıbrıs Online</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@700&display=swap" rel="stylesheet">
  <style>
    html, body {
      height: 100%; margin: 0; padding: 0;
      font-family: 'Inter', 'Montserrat', Arial, sans-serif;
    }
    body {
      background: #f6faff;
      color: #16213e;
      font-size: 17px;
      min-height: 100vh;
      letter-spacing: .01em;
    }
    /* NAVBAR */
    .navbar {
      width: 100vw;
      background: #fff;
      box-shadow: 0 2px 16px #2563eb17;
      border-radius: 0 0 18px 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 clamp(8px,5vw,36px);
      height: 62px;
      position: sticky;
      top: 0; left: 0; right: 0;
      z-index: 100;
    }
    .nav-brand {
      font-family: 'Montserrat', sans-serif;
      font-size: 1.5rem;
      font-weight: 700;
      color: #2563eb;
      letter-spacing: .01em;
      user-select: none;
      white-space: nowrap;
    }
    .nav-buttons {
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .nav-btn {
      padding: 8px 18px;
      border-radius: 12px;
      background: linear-gradient(90deg, #2563eb, #1746a2 80%);
      color: #fff;
      font-weight: 600;
      border: none;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 2px 8px #2563eb15;
      transition: background .18s, transform .16s;
      letter-spacing: .01em;
    }
    .nav-btn:hover, .nav-btn:active {
      background: linear-gradient(90deg, #1746a2, #2563eb 80%);
      transform: scale(1.04);
    }
    .nav-user {
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
    }
    .nav-avatar {
      width: 36px; height: 36px;
      border-radius: 50%;
      border: 2px solid #c6d7ee;
      object-fit: cover;
      background: #e3f0fe;
      box-shadow: 0 1px 8px #2563eb11;
    }
    .nav-username {
      max-width: 120px;
      font-weight: 600;
      color: #1746a2;
      font-size: .98rem;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
    }
    .nav-logout {
      background: transparent;
      color: #2563eb;
      border: none;
      font-weight: 700;
      font-size: 1rem;
      cursor: pointer;
      border-radius: 7px;
      padding: 6px 11px;
      transition: background .14s, color .14s;
    }
    .nav-logout:hover { background: #e0eaff; color: #1746a2;}
    .nav-login-btn {
      background: linear-gradient(90deg, #2563eb, #1746a2 80%);
      color: #fff;
      font-weight: 700;
      border: none;
      border-radius: 10px;
      padding: 8px 16px 8px 11px;
      font-size: .98rem;
      display: flex;
      align-items: center;
      gap: 7px;
      cursor: pointer;
      box-shadow: 0 2px 6px #2563eb10;
      transition: background .17s, transform .16s;
    }
    .nav-login-btn:hover, .nav-login-btn:active {
      background: linear-gradient(90deg, #1746a2, #2563eb 80%);
      transform: scale(1.03);
    }
    .google-logo { width: 23px; height: 23px; border-radius: 50%; }
    .hamburger { display: none; flex-direction: column; gap: 4px; cursor: pointer; margin-left: 10px;}
    .hamburger span {
      display: block;
      width: 27px; height: 3.5px;
      border-radius: 2px;
      background: #2563eb;
      transition: all .3s;
    }
    /* Drawer */
    .nav-drawer {
      display: none;
      position: fixed;
      top: 0; right: 0;
      width: 85vw; max-width: 330px; height: 100vh;
      background: #fff;
      box-shadow: -2px 0 24px #2563eb28;
      border-radius: 0 0 18px 18px;
      z-index: 200;
      padding: 39px 22px 22px 22px;
      flex-direction: column;
      gap: 16px;
      animation: fadeInDrawer .38s;
      min-width: 180px;
    }
    @keyframes fadeInDrawer {
      from { opacity: 0; transform: translateX(60px);}
      to { opacity: 1; transform: translateX(0);}
    }
    .nav-drawer .nav-btn { width: 100%; text-align: left; padding: 13px; margin-bottom: 7px;}
    .nav-drawer .nav-user { margin-top: 14px;}
    .nav-drawer-close {
      position: absolute; top: 16px; right: 18px;
      font-size: 2rem; color: #2563eb;
      background: none; border: none; cursor: pointer;
    }
    /* HERO */
    .hero {
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      justify-content: center;
      gap: 17px;
      margin: 0 auto;
      padding: 40px 0 25px 0;
      min-height: 250px;
      width: 100vw; max-width: 100vw;
      background: linear-gradient(90deg, #eaf2ff 0, #f6faff 100%);
      border-radius: 0 0 32px 32px;
      box-shadow: 0 3px 24px #2563eb0d;
    }
    .hero-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 11px;
      width: 98vw;
    }
    .hero-title {
      font-size: 1.45rem;
      font-family: 'Montserrat', sans-serif;
      font-weight: 700;
      color: #1746a2;
      margin-bottom: 7px;
      letter-spacing: .01em;
      text-align: center;
    }
    .hero-subtitle {
      font-size: 1rem;
      color: #25507b;
      font-weight: 500;
      max-width: 92vw;
      line-height: 1.6;
      text-align: center;
    }
    .hero-img {
      width: 130px;
      max-width: 85vw;
      border-radius: 24px;
      box-shadow: 0 5px 22px #2563eb0b;
      object-fit: cover;
      margin-bottom: 7px;
      background: #fff;
      animation: floatY 4s ease-in-out infinite;
    }
    @keyframes floatY {
      0%,100% { transform: translateY(0);}
      50% { transform: translateY(-9px);}
    }
    /* CALC MODULE */
    .module-wrap {
      width: 98vw;
      margin: 29px auto 12px auto;
      background: #fff;
      border-radius: 19px;
      box-shadow: 0 2px 14px #2563eb13;
      padding: 24px 2vw 21px 2vw;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
      max-width: 420px;
      z-index: 2;
      animation: fadeInUp .7s;
    }
    @keyframes fadeInUp {
      from { opacity:0; transform: translateY(40px);}
      to { opacity:1; transform: translateY(0);}
    }
    .module-title {
      font-size: 1.13rem;
      font-weight: 700;
      color: #2563eb;
      text-align: center;
      margin-bottom: 10px;
      letter-spacing: .01em;
    }
    .calc-row {
      display: flex;
      flex-direction: column;
      gap: 0;
      margin-bottom: 6px;
      width: 100%;
    }
    .calc-row-double {
      flex-direction: row;
      gap: 8px;
    }
    .calc-col {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 5px;
      min-width: 0;
    }
    .calc-label {
      font-weight: 600;
      font-size: .96rem;
      margin-bottom: 2px;
      color: #1746a2;
      letter-spacing: .01em;
    }
    .calc-input, .calc-select {
      padding: 9px 11px;
      border-radius: 7px;
      border: 1.3px solid #c6d7ee;
      font-size: .99rem;
      outline: none;
      background: #f3f7fb;
      transition: border .14s, box-shadow .13s;
      min-width: 0;
      box-shadow: 0 1px 3px #2563eb0b;
    }
    .calc-input:focus, .calc-select:focus {
      border: 1.5px solid #2563eb;
      background: #fafdff;
      box-shadow: 0 1px 8px #2563eb18;
    }
    .calc-action-btn {
      margin-top: 12px;
      width: 100%;
      padding: 12px 0;
      background: linear-gradient(90deg, #2563eb, #1746a2 80%);
      color: #fff;
      font-size: 1.07rem;
      font-weight: 700;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background .13s, box-shadow .13s, transform .14s;
      box-shadow: 0 2px 9px #2563eb11;
      letter-spacing: .02em;
    }
    .calc-action-btn:active, .calc-action-btn:hover {
      background: linear-gradient(90deg, #1746a2, #2563eb 80%);
      transform: scale(1.018);
      box-shadow: 0 8px 32px #2563eb17;
    }
    .calc-result {
      margin-top: 8px;
      padding: 11px 0 2px 0;
      font-size: 1.06rem;
      font-weight: 700;
      color: #1746a2;
      text-align: center;
      min-height: 23px;
      letter-spacing: .01em;
    }
    /* SHOP LOGOS */
    .shop-logos {
      margin: 27px auto 0 auto;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 17px;
      align-items: center;
      width: 97vw;
      max-width: 540px;
      padding-bottom: 23px;
    }
    .shop-logo-link {
      display: flex;
      align-items: center;
      transition: transform .14s;
      width: 21vw;
      max-width: 105px;
      min-width: 60px;
      justify-content: center;
    }
    .shop-logo-link:hover { transform: scale(1.10) translateY(-2px);}
    .shop-logo {
      height: 26px;
      object-fit: contain;
      filter: grayscale(0.07);
      max-width: 90px;
      min-width: 38px;
      background: #fff;
      border-radius: 7px;
      box-shadow: 0 2px 9px #2563eb0a;
      padding: 4px 6px;
      border: 1px solid #f1f5fa;
      width: 100%;
      transition: box-shadow .14s;
    }
    @media (min-width: 700px) {
      .navbar { height: 70px;}
      .nav-brand { font-size: 2rem;}
      .hero { flex-direction: row; gap: 39px; min-height: 340px; padding: 75px 0 45px 0;}
      .hero-content { align-items: flex-start; width: 50vw; }
      .hero-title { font-size: 2.1rem;}
      .hero-img { width: 240px; margin-bottom: 0;}
      .module-wrap { padding: 36px 32px 28px 32px; max-width: 460px;}
      .calc-row { flex-direction: row; gap: 13px; }
      .shop-logos { max-width: 700px; gap: 32px;}
    }
    @media (max-width: 440px) {
      .nav-brand { font-size: 1.09rem;}
      .module-wrap { padding: 7vw 1.5vw 8vw 1.5vw; }
      .shop-logo { height: 17px; min-width: 24px;}
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <nav class="navbar">
    <span class="nav-brand">Kıbrıs Online</span>
    <div class="nav-buttons" id="nav-buttons">
      <button class="nav-btn" id="btn-siparis-ver">Sipariş Ver</button>
      <button class="nav-btn" id="btn-siparislerim">Siparişlerim</button>
      <button class="nav-btn" id="btn-kargo-takip">Kargo Takip</button>
    </div>
    <div class="nav-user" id="nav-user">
      <button class="nav-login-btn" id="google-login-btn">
        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="google-logo" alt="Google ile Giriş">
        <span>Google ile Giriş Yap</span>
      </button>
      <span id="profile-box" style="display:none;">
        <img src="" id="profile-img" class="nav-avatar" alt="Profil Fotoğrafı">
        <span class="nav-username" id="profile-name"></span>
        <button class="nav-logout" id="logout-btn">Çıkış Yap</button>
      </span>
    </div>
    <div class="hamburger" id="hamburger" aria-label="Menüyü Aç/Kapat" tabindex="0">
      <span></span><span></span><span></span>
    </div>
    <div class="nav-drawer" id="nav-drawer" style="display:none;">
      <button class="nav-drawer-close" id="drawer-close" aria-label="Kapat">&times;</button>
      <button class="nav-btn" id="drawer-siparis-ver">Sipariş Ver</button>
      <button class="nav-btn" id="drawer-siparislerim">Siparişlerim</button>
      <button class="nav-btn" id="drawer-kargo-takip">Kargo Takip</button>
      <div class="nav-user" id="drawer-user" style="margin-top:14px;">
        <button class="nav-login-btn" id="drawer-google-login-btn">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="google-logo" alt="Google ile Giriş">
          <span>Google ile Giriş Yap</span>
        </button>
        <span id="drawer-profile-box" style="display:none;">
          <img src="" id="drawer-profile-img" class="nav-avatar" alt="Profil Fotoğrafı">
          <span class="nav-username" id="drawer-profile-name"></span>
          <button class="nav-logout" id="drawer-logout-btn">Çıkış Yap</button>
        </span>
      </div>
    </div>
  </nav>
  <!-- HERO BANNER -->
  <section class="hero">
    <div class="hero-content">
      <h1 class="hero-title">Türkiye’den Kıbrıs’a Teslimat</h1>
      <div class="hero-subtitle">
        Hızlı ve Güvenilir Kargo Hizmeti<br>
        Siparişlerinizi Türkiye’den Kıbrıs’a kolayca iletin, avantajlı fiyatlarla kapınıza gelsin.
      </div>
    </div>
    <img src="https://cdn.pixabay.com/photo/2016/03/31/20/11/boxes-1299512_1280.png" class="hero-img" alt="Kargo Görseli">
  </section>
  <!-- CALCULATION MODULE -->
  <div class="module-wrap" id="hesaplama-modulu">
    <div class="module-title">Hesaplama Modülü</div>
    <div class="calc-row">
      <div class="calc-col" style="flex:2;">
        <label class="calc-label" for="product-link">Ürün Linki</label>
        <input type="url" id="product-link" class="calc-input" placeholder="Ürün bağlantısını giriniz">
      </div>
    </div>
    <div class="calc-row calc-row-double">
      <div class="calc-col">
        <label class="calc-label" for="product-price">Ürün Fiyatı (₺)</label>
        <input type="number" id="product-price" min="1" step="0.01" class="calc-input" placeholder="Fiyat">
      </div>
      <div class="calc-col">
        <label class="calc-label" for="product-category">Kategori</label>
        <select id="product-category" class="calc-select">
          <option value="">Seçiniz</option>
          <option value="mobilya">Mobilya</option>
          <option value="elektronik">Elektronik</option>
          <option value="giyim">Giyim</option>
          <option value="kirtasiye">Kırtasiye</option>
          <option value="kozmetik">Kozmetik</option>
        </select>
      </div>
    </div>
    <div class="calc-row calc-row-double">
      <div class="calc-col">
        <label class="calc-label" for="delivery-type">Teslimat Tipi</label>
        <select id="delivery-type" class="calc-select">
          <option value="">Seçiniz</option>
          <option value="ev">Eve Teslim</option>
          <option value="depo">Depodan Teslim</option>
        </select>
      </div>
      <div class="calc-col" id="city-group" style="display:none;">
        <label class="calc-label" for="city-select">Şehir</label>
        <select id="city-select" class="calc-select">
          <option value="">Şehir Seçiniz</option>
          <option value="lefkosa">Lefkoşa (200₺)</option>
          <option value="girne">Girne (350₺)</option>
          <option value="magusa">Mağusa (500₺)</option>
          <option value="guzelyurt">Güzelyurt (450₺)</option>
          <option value="lefke">Lefke (600₺)</option>
          <option value="iskele">İskele (550₺)</option>
          <option value="karpaz">Karpaz (700₺)</option>
        </select>
      </div>
    </div>
    <div>
      <button class="calc-action-btn" id="calc-btn">Hesapla</button>
      <div class="calc-result" id="calc-result"></div>
    </div>
  </div>
  <!-- SHOP LOGOS -->
  <div class="shop-logos">
    <a href="https://www.trendyol.com/" class="shop-logo-link" target="_blank" rel="noopener">
      <img src="https://cdn.logo.com/hotlink-ok/logo-social.png?logo=trendyol" alt="Trendyol" class="shop-logo">
    </a>
    <a href="https://www.hepsiburada.com/" class="shop-logo-link" target="_blank" rel="noopener">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9e/Hepsiburada_logo.svg/512px-Hepsiburada_logo.svg.png" alt="Hepsiburada" class="shop-logo">
    </a>
    <a href="https://www.n11.com/" class="shop-logo-link" target="_blank" rel="noopener">
      <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/N11_logo.svg/512px-N11_logo.svg.png" alt="N11" class="shop-logo">
    </a>
    <a href="https://www.amazon.com.tr/" class="shop-logo-link" target="_blank" rel="noopener">
      <img src="https://upload.wikimedia.org/wikipedia/commons/a/a9/Amazon_logo.svg" alt="Amazon" class="shop-logo">
    </a>
    <a href="https://www.ciceksepeti.com/" class="shop-logo-link" target="_blank" rel="noopener">
      <img src="https://cdn.ciceksepeti.net/assets/images/newdesign/logos/ciceksepeti-logos/ciceksepeti-logo-2022.svg" alt="ÇiçekSepeti" class="shop-logo">
    </a>
  </div>
  <!-- FIREBASE SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
      authDomain: "kibris-6b4f7.firebaseapp.com",
      projectId: "kibris-6b4f7",
      storageBucket: "kibris-6b4f7.firebasestorage.app",
      messagingSenderId: "141262926171",
      appId: "1:141262926171:web:07226845e51d4bbc0dea7e",
      measurementId: "G-JL9P6BRZTD"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // Hamburger menu logic
    const hamburger = document.getElementById('hamburger');
    const navDrawer = document.getElementById('nav-drawer');
    const drawerClose = document.getElementById('drawer-close');
    let drawerOpen = false;
    function openDrawer() {
      navDrawer.style.display = 'flex';
      drawerOpen = true;
      document.body.style.overflow = 'hidden';
    }
    function closeDrawer() {
      navDrawer.style.display = 'none';
      drawerOpen = false;
      document.body.style.overflow = '';
    }
    hamburger.onclick = openDrawer;
    drawerClose.onclick = closeDrawer;
    window.addEventListener('resize', () => {
      if (window.innerWidth > 700) closeDrawer();
    });
    document.addEventListener('mousedown', function(e){
      if(drawerOpen && !navDrawer.contains(e.target) && !hamburger.contains(e.target)){
        closeDrawer();
      }
    });

    // Auth UI
    const loginBtn = document.getElementById('google-login-btn');
    const profileBox = document.getElementById('profile-box');
    const profileImg = document.getElementById('profile-img');
    const profileName = document.getElementById('profile-name');
    const logoutBtn = document.getElementById('logout-btn');
    let currentUser = null;
    // Drawer auth UI
    const drawerLoginBtn = document.getElementById('drawer-google-login-btn');
    const drawerProfileBox = document.getElementById('drawer-profile-box');
    const drawerProfileImg = document.getElementById('drawer-profile-img');
    const drawerProfileName = document.getElementById('drawer-profile-name');
    const drawerLogoutBtn = document.getElementById('drawer-logout-btn');

    function showProfile(user) {
      if (!user) return;
      profileImg.src = user.photoURL || "";
      profileName.textContent = user.displayName || "";
      profileBox.style.display = 'inline-flex';
      loginBtn.style.display = 'none';

      drawerProfileImg.src = user.photoURL || "";
      drawerProfileName.textContent = user.displayName || "";
      drawerProfileBox.style.display = 'inline-flex';
      drawerLoginBtn.style.display = 'none';
    }
    function hideProfile() {
      profileBox.style.display = 'none';
      loginBtn.style.display = 'flex';
      drawerProfileBox.style.display = 'none';
      drawerLoginBtn.style.display = 'flex';
    }
    loginBtn.onclick = drawerLoginBtn.onclick = function() {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .catch(err => {
          alert("Giriş başarısız: " + (err.message || err));
        });
    };
    logoutBtn.onclick = drawerLogoutBtn.onclick = function() {
      auth.signOut();
    };

    auth.onAuthStateChanged(function(user){
      currentUser = user;
      if(user){
        showProfile(user);
      }else{
        hideProfile();
      }
    });

    // NAV BAR BUTTONS & DRAWER BUTTONS
    function requireLogin(actionFn) {
      if (!currentUser) {
        alert("Lütfen giriş yapınız");
        return false;
      }
      if (typeof actionFn === "function") actionFn();
      return true;
    }
    document.getElementById('btn-siparis-ver').onclick =
    document.getElementById('drawer-siparis-ver').onclick = function() {
      requireLogin(() => {
        window.location.href = "siparisver.html";
      });
    };
    document.getElementById('btn-siparislerim').onclick =
    document.getElementById('drawer-siparislerim').onclick = function() {
      requireLogin(() => {
        window.location.href = "siparislerim.html";
      });
    };
    document.getElementById('btn-kargo-takip').onclick =
    document.getElementById('drawer-kargo-takip').onclick = function() {
      requireLogin(() => {
        window.location.href = "kargotakip.html";
      });
    };
    // Hesaplama Modülü
    const categoryMultipliers = {
      mobilya: 1.7,
      elektronik: 1.7,
      giyim: 1.45,
      kirtasiye: 1.4,
      kozmetik: 1.7
    };
    const cityFees = {
      lefkosa: 200,
      girne: 350,
      magusa: 500,
      guzelyurt: 450,
      lefke: 600,
      iskele: 550,
      karpaz: 700
    };
    const deliveryType = document.getElementById('delivery-type');
    const cityGroup = document.getElementById('city-group');
    const citySelect = document.getElementById('city-select');
    const calcBtn = document.getElementById('calc-btn');
    const calcResult = document.getElementById('calc-result');
    let calcState = "hesapla";
    let lastCalculation = null;

    deliveryType.addEventListener('change', function() {
      if (deliveryType.value === "ev") {
        cityGroup.style.display = "flex";
      } else {
        citySelect.value = "";
        cityGroup.style.display = "none";
      }
    });

    function formatMoney(val) {
      return Number(val).toLocaleString("tr-TR", {minimumFractionDigits:2, maximumFractionDigits:2}) + " ₺";
    }

    calcBtn.addEventListener('click', function() {
      if (calcState === "hesapla") {
        const price = parseFloat(document.getElementById('product-price').value);
        const category = document.getElementById('product-category').value;
        const delivery = deliveryType.value;
        let city = citySelect.value;
        calcResult.textContent = "";
        if (isNaN(price) || price < 1) {
          calcResult.textContent = "Lütfen geçerli ürün fiyatı giriniz.";
          return;
        }
        if (!category || !categoryMultipliers[category]) {
          calcResult.textContent = "Lütfen kategori seçiniz.";
          return;
        }
        if (!delivery) {
          calcResult.textContent = "Lütfen teslimat tipi seçiniz.";
          return;
        }
        if (delivery === "ev" && (!city || !cityFees[city])) {
          calcResult.textContent = "Lütfen şehir seçiniz.";
          return;
        }
        let total = price * categoryMultipliers[category];
        if (delivery === "ev") total += cityFees[city];
        lastCalculation = total;
        calcResult.textContent = "Toplam Tutar: " + formatMoney(total);
        calcBtn.textContent = "Sipariş Ver";
        calcState = "siparisver";
      } else {
        if (!currentUser) {
          alert("Lütfen giriş yapınız");
          return;
        }
        window.location.href = "siparisver.html";
      }
    });

    ['product-link','product-price','product-category','delivery-type','city-select'].forEach(function(id){
      document.getElementById(id).addEventListener('input', function(){
        calcBtn.textContent = "Hesapla";
        calcState = "hesapla";
        calcResult.textContent = "";
      });
    });
  </script>
</body>
</html>
