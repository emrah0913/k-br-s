<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Türkiye'den Kıbrıs'a Sipariş Getirme Hizmeti | Getir Kıbrıs</title>
    <meta name="description" content="Trendyol, Hepsiburada ve diğer Türkiye sitelerinden Kıbrıs'a kolayca ürün getirin. Hesaplayın ve sepetinize ekleyin.">
    <link rel="canonical" href="https://getirkibris.com" />
    <link rel="icon" href="/favicon.ico?v=2" type="image/x-icon">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">

    <script>
        // Tailwind CSS Konfigürasyonu
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5d3ebc',
                        secondary: '#ffd300'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    borderRadius: {
                        'button': '8px',
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f9f9f9;
        }
        .copy-btn:active, .auth-button:active {
            transform: scale(0.95);
        }
        /* Animasyonlar */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hidden {
            display: none;
        }
        /* index (22).html'den gelen özel Remixicon kuralı */
        :where([class^="ri-"])::before {
            content: "\f3c2";
        }
    </style>
</head>
<body class="bg-gray-50">

<div class="w-full max-w-screen-lg mx-auto relative min-h-screen pb-16">

    <header class="fixed top-0 w-full bg-white shadow-sm z-50 px-4 py-3 flex items-center">
        <div class="flex-1">
        </div>
        <div class="flex flex-col items-center">
            <img src="logom.png" alt="Getir Kıbrıs" class="h-12"> <a href="https://getirkibris.com/index.html" data-readdy="true"
                class="text-sm font-medium text-primary mt-1">Ana Sayfa</a>
        </div>
        <div class="flex-1 flex justify-end">
            <div id="auth-button" class="w-8 h-8 flex items-center justify-center">
                <button id="login-btn" class="text-xs text-primary font-medium cursor-pointer">
                    <i class="ri-google-fill ri-lg"></i>
                </button>
                <div id="profile-container" class="hidden">
                    <img id="profile-img" src="" alt="Profil" class="w-8 h-8 rounded-full cursor-pointer">
                </div>
            </div>
        </div>
    </header>

    <main class="pt-16 pb-20">
       <div class="relative w-full h-64 sm:h-80 lg:h-[450px] overflow-hidden mb-6">
    <iframe 
        class="w-full h-full object-cover" 
        src="https://www.youtube.com/embed/dd-adV7eZCc?rel=0&autoplay=0&controls=1&showinfo=0&modestbranding=1" 
        title="YouTube video player" 
        frameborder="0" 
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
        referrerpolicy="strict-origin-when-cross-origin" 
        allowfullscreen>
    </iframe>
    <div class="absolute inset-0 bg-gradient-to-t from-primary/70 to-transparent pointer-events-none"></div>
</div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 px-4 mb-8">
            <button id="calculate-btn"
                class="bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 cursor-pointer border border-gray-100 hover:border-primary/20 transition-all">
                <div
                    class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2">
                    <i class="ri-calculator-line ri-xl text-primary"></i>
                </div>
                <span class="text-sm font-medium">Sipariş Ver</span>
            </button>

            <a href="https://getirkibris.com/sepet.html" id="cart-page-btn"
                class="relative bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 cursor-pointer border border-gray-100 hover:border-primary/20 transition-all">
                <div
                    class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2">
                    <i class="ri-shopping-cart-line ri-xl text-primary"></i>
                </div>
                <span class="text-sm font-medium">Sepetim</span>
                <span id="cart-badge" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center hidden" style="top: 10px; right: 10px;">0</span>
            </a>
        </div>

        <section id="calculator-section" class="bg-white rounded-lg shadow-lg mx-auto p-6 mb-8 max-w-2xl fade-in hidden">
            <h2 class="text-xl font-semibold mb-4 text-primary">1. Ürün Bilgilerini Girin</h2>
            <form id="calculator-form" class="space-y-4">
                <div>
                    <label for="order-method" class="block text-sm font-medium text-gray-700 mb-1">Sipariş Yöntemi<span class="text-red-500">*</span></label>
                    <select id="order-method" required class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                        <option value="service" selected>Ürünü benim yerime siz sipariş edin</option>
                        <option value="self">Ürünü ben alacağım, sadece kargo hizmeti istiyorum</option>
                    </select>
                </div>
                <div>
                    <label for="product-link" class="block text-sm font-medium text-gray-700 mb-1">Ürün Linki<span class="text-red-500">*</span></label>
                    <input type="url" id="product-link" required class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="https://www.example.com/urun">
                </div>
                <div>
                    <label for="product-price" class="block text-sm font-medium text-gray-700 mb-1">Ürün Fiyatı (₺)<span class="text-red-500">*</span></label>
                    <input type="number" id="product-price" required class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="150.00" step="any" min="0.01">
                </div>
                <div>
                    <label for="product-category" class="block text-sm font-medium text-gray-700 mb-1">Kategori<span class="text-red-500">*</span></label>
                    <select id="product-category" required class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50 text-sm">
                        <option value="" disabled selected>Kategoriler Yükleniyor...</option>
                    </select>
                </div>
                
                <div id="calculation-result" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                    <h3 class="font-medium text-gray-800 mb-2">Ürün Getirme Maliyeti</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span id="result-price-label">Ürün Fiyatı:</span>
                            <span id="result-price">0 ₺</span>
                        </div>
                        <div class="flex justify-between">
                            <span>Kategori Hizmet Bedeli:</span>
                            <span id="result-category-fee">0 ₺</span>
                        </div>
                        <div class="flex justify-between font-bold text-primary pt-2 border-t border-gray-200">
                            <span>Getirme Dahil Toplam:</span>
                            <span id="result-total">0 ₺</span>
                        </div>
                    </div>
                </div>

                <button type="submit" id="main-action-btn" class="w-full bg-primary text-white py-3 rounded-button font-semibold hover:bg-primary/90 transition-colors cursor-pointer flex items-center justify-center gap-2">
                    <i class="ri-calculator-line"></i>
                    <span>Maliyeti Hesapla</span>
                </button>
            </form>
        </section>


<h2 class="text-2xl font-bold text-gray-800 mb-4 text-center border-b-2 border-primary pb-2">
    ✨ Haftanın Ürünü ✨
</h2>

<div class="max-w-sm mx-auto my-8 bg-white shadow-md rounded-lg overflow-hidden text-center">
    
  <img src="https://cdn.dsmcdn.com/ty1617/prod/QC/20250101/10/d3da108c-94a7-3889-a7bb-473e0a2d7fd6/1_org_zoom.jpg"
        alt="Bordo Çizgili Düğmeli Polo Yaka Kadın Triko Kazak MG2280"
        class="w-full object-cover">
    
    <h3 class="font-bold mb-2">Bordo Çizgili Düğmeli Polo Yaka Kadın Triko Kazak MG2280</h3>
    <a href="https://www.trendyol.com/madmext/bordo-cizgili-dugmeli-polo-yaka-kadin-triko-kazak-mg2280-p-888449782?merchantId=105292"
        target="_blank"
        class="bg-primary text-white px-4 py-2 rounded hover:bg-primary/80 transition">Satın Al</a>
</div>


<div class="px-4 mb-8">
    <h3 class="text-lg font-semibold mb-4">Popüler Alışveriş Siteleri</h3>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">

        <a href="https://www.trendyol.com" target="_blank"
            class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
            <img src="https://www.freelogovectors.net/wp-content/uploads/2024/01/trendyol_logo-freelogovectors.net_.png"
                alt="Trendyol" class="w-16 h-16 object-contain">
            <span class="hidden">
                Kıbrıs'ta Trendyol var mı, Türkiye'den Kıbrıs'a Trendyol kargo, Trendyol Kıbrıs alışveriş,
                Trendyol Kıbrıs sipariş, Kıbrıs Trendyol ürünleri, Trendyol Kıbrıs teslim, Trendyol Türkiye’den gönderim,
                Kıbrıs Trendyol fırsatları, Trendyol kampanya Kıbrıs, Trendyol ürün fiyatları Kıbrıs, Trendyol Kıbrıs alışveriş sitesi,
                Trendyol Kıbrıs hızlı kargo, Trendyol Kıbrıs güvenli alışveriş, Trendyol Kıbrıs indirim, Kıbrıs Trendyol sipariş süreci,
                Trendyol Kıbrıs popüler ürünler, Trendyol Kıbrıs müşteri yorumları, Trendyol Kıbrıs ödeme seçenekleri,
                Trendyol Kıbrıs elektronik ürünleri, Trendyol Kıbrıs moda ürünleri, Trendyol Kıbrıs ev dekorasyonu,
                Trendyol Kıbrıs kıyafet, Trendyol Kıbrıs ayakkabı, Trendyol Kıbrıs çanta, Trendyol Kıbrıs indirimli ürünler,
                Trendyol Kıbrıs ücretsiz kargo, Kıbrıs Trendyol sipariş takibi, Trendyol Kıbrıs alışveriş rehberi
            </span>
        </a>

        <a href="https://www.hepsiburada.com" target="_blank"
            class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
            <img src="https://www.ideasoft.com.tr/wp-content/uploads/2022/05/Hepsiburada-Logo-Transparan.png"
                alt="Hepsiburada" class="w-16 h-16 object-contain">
            <span class="hidden">
                Hepsiburada Kıbrıs, Türkiye'den Kıbrıs'a Hepsiburada kargo, Hepsiburada alışveriş, Hepsiburada Kıbrıs sipariş,
                Kıbrıs Hepsiburada ürünleri, Hepsiburada Kıbrıs teslim, Hepsiburada Türkiye’den gönderim, Kıbrıs Hepsiburada fırsatları,
                Hepsiburada kampanya Kıbrıs, Hepsiburada ürün fiyatları Kıbrıs, Hepsiburada Kıbrıs alışveriş sitesi,
                Hepsiburada Kıbrıs hızlı kargo, Hepsiburada Kıbrıs güvenli alışveriş, Hepsiburada Kıbrıs indirim, Kıbrıs Hepsiburada sipariş süreci,
                Hepsiburada Kıbrıs popüler ürünler, Hepsiburada Kıbrıs müşteri yorumları, Hepsiburada Kıbrıs ödeme seçenekleri,
                Hepsiburada Kıbrıs elektronik ürünleri, Hepsiburada Kıbrıs moda ürünleri, Hepsiburada Kıbrıs ev dekorasyonu
            </span>
        </a>

        <a href="https://www.n11.com" target="_blank"
            class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/60/N11_logo.svg"
                alt="N11" class="w-16 h-16 object-contain">
            <span class="hidden">
                N11 Kıbrıs, Türkiye'den Kıbrıs'a N11 kargo, N11 Kıbrıs alışveriş, N11 Kıbrıs sipariş, Kıbrıs N11 ürünleri,
                N11 Kıbrıs teslim, N11 Türkiye’den gönderim, Kıbrıs N11 fırsatları, N11 kampanya Kıbrıs, N11 ürün fiyatları Kıbrıs,
                N11 Kıbrıs alışveriş sitesi, N11 Kıbrıs hızlı kargo, N11 Kıbrıs güvenli alışveriş, N11 Kıbrıs indirim,
                N11 Kıbrıs popüler ürünler, N11 Kıbrıs müşteri yorumları, N11 Kıbrıs ödeme seçenekleri
            </span>
        </a>

        <a href="https://www.amazon.com.tr" target="_blank"
            class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZvIiXt3ogobFi7dC0k1dMgpNvrwiTQl6cbA&s"
                alt="Amazon" class="w-16 h-16 object-contain">
            <span class="hidden">
                Amazon Kıbrıs, Türkiye'den Kıbrıs'a Amazon kargo, Amazon Kıbrıs alışveriş, Amazon Kıbrıs sipariş,
                Kıbrıs Amazon ürünleri, Amazon Kıbrıs teslim, Amazon Türkiye’den gönderim, Kıbrıs Amazon fırsatları,
                Amazon kampanya Kıbrıs, Amazon ürün fiyatları Kıbrıs, Amazon Kıbrıs alışveriş sitesi, Amazon Kıbrıs hızlı kargo
            </span>
        </a>


        <a href="https://www.temu.com" target="_blank"
    class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Temu_logo_icon.svg/2048px-Temu_logo_icon.svg.png"
        alt="Temu" class="w-16 h-16 object-contain">
    <span class="hidden">
        Temu Kıbrıs, Türkiye'den Kıbrıs'a Temu kargo, Temu Kıbrıs sipariş, Kıbrıs Temu ürünleri,
        Temu Kıbrıs teslim, Temu Türkiye’den gönderim, Kıbrıs Temu fırsatları, Temu kampanya Kıbrıs,
        Temu ürün fiyatları Kıbrıs, Temu Kıbrıs alışveriş sitesi, Temu Kıbrıs hızlı kargo, Temu sipariş takibi Kıbrıs
    </span>
</a>

       <a href="https://www.zara.com/tr/" target="_blank"
    class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
    <img src="https://logodownload.org/wp-content/uploads/2014/05/zara-logo-0.png"
        alt="Zara" class="w-16 h-16 object-contain">
    <span class="hidden">
        Zara Kıbrıs, Türkiye'den Kıbrıs'a Zara kargo, Zara Kıbrıs sipariş, Kıbrıs Zara ürünleri,
        Zara Kıbrıs teslim, Zara Türkiye’den gönderim, Kıbrıs Zara fırsatları, Zara kampanya Kıbrıs,
        Zara ürün fiyatları Kıbrıs, Zara Kıbrıs moda, Zara Kıbrıs kıyafet, Zara Kıbrıs hızlı kargo
    </span>
</a>

        <a href="https://www.ciceksepeti.com" target="_blank"
            class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
            <img src="https://1000logos.net/wp-content/uploads/2022/02/Ciceksepeti-Logo.jpg"
                alt="ÇiçekSepeti" class="w-16 h-16 object-contain">
            <span class="hidden">
                ÇiçekSepeti Kıbrıs, Türkiye'den Kıbrıs'a ÇiçekSepeti kargo, ÇiçekSepeti Kıbrıs sipariş, Kıbrıs ÇiçekSepeti ürünleri,
                ÇiçekSepeti Kıbrıs teslim, ÇiçekSepeti Türkiye’den gönderim, Kıbrıs ÇiçekSepeti fırsatları, ÇiçekSepeti kampanya Kıbrıs,
                ÇiçekSepeti ürün fiyatları Kıbrıs, ÇiçekSepeti Kıbrıs alışveriş sitesi, ÇiçekSepeti Kıbrıs hızlı kargo
            </span>
        </a>

        <a href="https://www.gittigidiyor.com" target="_blank"
            class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center cursor-pointer border border-gray-100">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQBRDMxa35X5jhducAD-rgHdlJ9Nxw0O4NSFw&s"
                alt="GittiGidiyor" class="w-16 h-16 object-contain">
            <span class="hidden">
                GittiGidiyor Kıbrıs, Türkiye'den Kıbrıs'a GittiGidiyor kargo, GittiGidiyor Kıbrıs alışveriş, GittiGidiyor Kıbrıs sipariş,
                Kıbrıs GittiGidiyor ürünleri, GittiGidiyor Kıbrıs teslim, GittiGidiyor Türkiye’den gönderim, Kıbrıs GittiGidiyor fırsatları,
                GittiGidiyor kampanya Kıbrıs, GittiGidiyor ürün fiyatları Kıbrıs, GittiGidiyor Kıbrıs alışveriş sitesi, GittiGidiyor Kıbrıs hızlı kargo
            </span>
        </a>

    </div>
</div>





<div class="px-4 mt-8">
    <h2 class="text-2xl font-bold text-gray-800 mb-6 text-center">Müşteri Yorumları ⭐</h2>

    <div id="review-login-required" class="bg-blue-50 border border-blue-200 p-4 rounded-lg shadow-sm text-center hidden">
        <p class="text-blue-700 font-medium">Yorum yapmak için lütfen giriş yapın.</p>
        <button id="open-login-for-review" class="mt-3 bg-blue-500 text-white px-4 py-2 rounded-button text-sm hover:bg-blue-600 transition-colors">
            Giriş Yap
        </button>
    </div>
    
    <div id="review-form-container" class="bg-white p-6 rounded-xl shadow-lg mb-8 hidden fade-in">
        <h3 class="text-xl font-semibold mb-4 text-primary">Yorumunuzu Yazın</h3>
        
        <div id="review-pending-message" class="bg-yellow-50 border border-yellow-200 p-4 rounded-lg text-yellow-700 font-medium text-center hidden mb-4">
            Yorumunuz beklemede. Onaylandıktan sonra bu alanda yayınlanacaktır.
        </div>

        <form id="review-form" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1">Puanınız<span class="text-red-500">*</span></label>
                <div id="star-rating" class="flex space-x-1 items-center">
                    <i class="ri-star-line ri-xl text-gray-300 cursor-pointer hover:text-secondary transition-colors" data-star="1"></i>
                    <i class="ri-star-line ri-xl text-gray-300 cursor-pointer hover:text-secondary transition-colors" data-star="2"></i>
                    <i class="ri-star-line ri-xl text-gray-300 cursor-pointer hover:text-secondary transition-colors" data-star="3"></i>
                    <i class="ri-star-line ri-xl text-gray-300 cursor-pointer hover:text-secondary transition-colors" data-star="4"></i>
                    <i class="ri-star-line ri-xl text-gray-300 cursor-pointer hover:text-secondary transition-colors" data-star="5"></i>
                    <input type="hidden" id="review-rating" value="0" data-current-rating="0">
                </div>
            </div>
            <div>
                <label for="review-text" class="block text-sm font-medium text-gray-700 mb-1">Yorumunuz<span class="text-red-500">*</span> (En az 10 karakter)</label>
                <textarea id="review-text" required rows="4" maxlength="500" class="w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="Hizmet hakkındaki düşüncelerinizi paylaşın..."></textarea>
            </div>
            <button type="submit" id="submit-review-btn" class="w-full bg-primary text-white py-3 rounded-button font-semibold hover:bg-primary/90 transition-colors">
                Yorumu Gönder
            </button>
        </form>
    </div>

    <div class="mt-8">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">Müşteri Görüşleri</h3>
        <div id="loading-reviews" class="text-center p-4 text-gray-500 hidden">
            <i class="ri-loader-4-line ri-spin ri-xl"></i> Yorumlar yükleniyor...
        </div>
        <div id="reviews-list" class="space-y-4">
            </div>
    </div>
</div>

        
        <div class="mt-8 bg-gray-50 p-6 rounded-xl shadow-sm">
    <h3 class="text-xl font-semibold mb-3 text-gray-800">Sipariş Yöntemleri</h3>
    <p class="text-gray-700 mb-4">
        Getir Kıbrıs’ta iki farklı sipariş yöntemiyle hizmet veriyoruz. Aşağıdaki seçeneklerden hangisi size uygunsa onu tercih edebilirsiniz:
    </p>

    <div class="space-y-6">
        <div class="bg-white p-4 rounded-lg shadow">
            <h4 class="font-semibold text-lg text-indigo-700 mb-2">1️⃣ Ürünü Benim Yerime Sipariş Edin</h4>
            <p class="text-gray-700">
                Ürünü sizin yerinize biz sipariş ediyoruz. 
                Ödemeyi bize yapıyorsunuz, tüm süreci biz takip ediyoruz.
                Ürün elinize teslim edilene kadar Getir Kıbrıs güvencesindesiniz.
            </p>
        </div>

        <div class="bg-white p-4 rounded-lg shadow">
            <h4 class="font-semibold text-lg text-indigo-700 mb-2">2️⃣ Ürünü Ben Alacağım Sadece Kargo Hizmeti İstiyorum</h4>
            <p class="text-gray-700">
                Bu yöntemde alışverişi kendiniz yaparsınız. Yalnızca Türkiye'deki gönderim adresi olarak <strong>Getir Kıbrıs deposu adresini</strong> girmelisiniz:
            </p>

            <div class="bg-gray-100 p-3 rounded-lg mt-3">
                <p class="font-semibold text-sm text-gray-800">Getir Kıbrıs Türkiye Adresi:</p>
                <p class="text-sm text-gray-700">
                    <strong>Adres:</strong> Aydın, Nazilli, Bozyurt Mah. Kanal Üstü 3281 sk. No:3 <br>
                    <strong>Telefon:</strong> +90 547 190 19 88
                </p>
            </div>

            <p class="text-gray-700 mt-3">
                Ürün bu adrese ulaştığında biz sizin adınıza teslim alır, Kıbrıs’a kargo ile gönderimini sağlarız.
            </p>
        </div>
    </div>
</div>

            
            <div class="mt-6">
                <h4 class="text-lg font-semibold mb-4">Kıbrıs Depo Adresimiz</h4>
                <div class="space-y-4">
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 flex items-center justify-center text-primary">
                            <i class="ri-map-pin-2-line"></i>
                        </div>
                        <div>
                            <h5 class="font-medium text-gray-800">Adres</h5>
                            <p class="text-sm text-gray-600">Şehit Mustafa Ruso Caddesi, No:86, Lefkoşa, KKTC</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 flex items-center justify-center text-primary">
                            <i class="ri-phone-line"></i>
                        </div>
                        <div>
                            <h5 class="font-medium text-gray-800">Telefon</h5>
                            <p class="text-sm text-gray-600">+90 392 123 45 67</p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <div class="w-6 h-6 flex items-center justify-center text-primary">
                            <i class="ri-mail-line"></i>
                        </div>
                        <div>
                            <h5 class="font-medium text-gray-800">E-posta</h5>
                            <p class="text-sm text-gray-600">info@getirkibris.com</p>
                        </div>
                    </div>
                </div>
                <div class="mt-6 relative">
                    <div class="absolute top-4 left-4 z-10 bg-white px-4 py-2 rounded-lg shadow-md">
                        <h5 class="font-medium text-gray-800">Kıbrıs Adresimiz</h5>
                    </div>
                    <div class="w-full h-64 sm:h-80 lg:h-96 rounded-lg overflow-hidden">
                        <a href="https://www.google.com/maps/place/Pufemo/@35.2265014,33.4637806,17z/data=!3m1!4b1!4m6!3m5!1s0x14de3f74e0864075:0x5fa8b6333def3eb!8m2!3d35.2265014!4d33.4637806!16s%2Fg%2F11x5__k07t?entry=ttu&g_ep=EgoyMDI1MDUyOC4wIKXMDSoASAFQAw%3D%3D" data-readdy="true" target="_blank">
                            <img src="https://public.readdy.ai/gen_page/map_placeholder_1280x720.png" alt="Harita"
                                class="w-full h-full object-cover">
                        </a>
                    </div>
                </div>
                <div class="mt-8 space-y-6">
                    <div>
                        <h4 class="text-lg font-semibold mb-4">Alışveriş İşlemleri</h4>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="ri-shopping-cart-line text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-800">Sipariş Verme</h5>
                                        <p class="text-sm text-gray-600 mt-1">Türkiye'deki herhangi bir e-tic
                                            sitesinden ürün seçin, sipariş formunu doldurun ve ödemenizi yapın.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="ri-calculator-line text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-800">Maliyet Hesaplama</h5>
                                        <p class="text-sm text-gray-600 mt-1">Ürün fiyatı ve kategorisine göre toplam
                                            maliyeti hesaplayın, ek ücretleri önceden öğrenin.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold mb-4">Teslimat ve Takip</h4>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="ri-truck-line text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-800">Kargo Takibi</h5>
                                        <p class="text-sm text-gray-600 mt-1">Siparişinizin durumunu anlık olarak
                                            takip edin, teslimat sürecini kontrol edin.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="ri-map-pin-line text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-800">Teslimat Seçenekleri</h5>
                                        <p class="text-sm text-gray-600 mt-1">Depodan teslim veya adrese teslimat
                                            seçeneklerinden size uygun olanı seçin.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold mb-4">Müşteri Hizmetleri</h4>
                        <div class="grid grid-cols-1 gap-4">
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="ri-customer-service-line text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-800">7/24 Destek</h5>
                                        <p class="text-sm text-gray-600 mt-1">WhatsApp üzerinden bize ulaşın,
                                            sorularınızı yanıtlayalım, sorunlarınıza çözüm bulalım.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white p-4 rounded-lg shadow-sm border border-gray-100">
                                <div class="flex items-start gap-4">
                                    <div
                                        class="w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center flex-shrink-0">
                                        <i class="ri-file-list-3-line text-primary"></i>
                                    </div>
                                    <div>
                                        <h5 class="font-medium text-gray-800">Sipariş Geçmişi</h5>
                                        <p class="text-sm text-gray-600 mt-1">Tüm siparişlerinizi görüntüleyin,
                                            geçmiş alışverişlerinizi kontrol edin.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <section class="px-4 py-6 text-center">
            <h1 class="text-2xl sm:text-4xl font-bold text-primary mb-4">Türkiye’den Kıbrıs’a Ürün Getirme Hizmeti</h1>
            <p class="text-lg text-gray-700">
                Getir Kıbrıs, Türkiye'deki online alışveriş sitelerinden verdiğiniz siparişleri sizin için Kuzey Kıbrıs’a ulaştırır.
                Trendyol, Hepsiburada, N11, Amazon gibi sitelerden aldığınız ürünleri uygun fiyatlarla teslim alırsınız.
            </p>
        </section>
    </main>

<a href="https://wa.me/905471901988" target="_blank" data-readdy="true"
    class="fixed bottom-20 right-4 z-50 bg-[#25D366] rounded-full shadow-lg flex items-center justify-center hover:bg-[#20bd5a] transition-colors p-6">
    <i class="ri-whatsapp-line ri-xl text-white"></i>
</a>




    <div class="mt-8 px-4 pb-20 text-center">
        <div class="space-x-4">
            <a href="gizlilik-politikasi.html" class="text-xs text-gray-600 hover:text-primary">Gizlilik Politikası</a>
            <a href="kullanim-sartlari.html" class="text-xs text-gray-600 hover:text-primary">Kullanım Şartları</a>
            <a href="sss.html" class="text-xs text-gray-600 hover:text-primary">S.S.S.</a>
        </div>
    </div>

    <div id="login-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-[100] hidden">
        <div class="bg-white rounded-lg p-8 w-full max-w-sm m-4 relative fade-in">
            <button id="close-login-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="ri-close-line ri-lg"></i></button>
            <div class="text-center mb-6">
                <h3 class="text-2xl font-bold text-gray-800">Hoş Geldiniz!</h3>
                <p class="text-sm text-gray-600 mt-1">Hizmetlerimizi kullanmak için giriş yapın.</p>
            </div>
            <button id="google-login-btn" class="w-full flex items-center justify-center gap-3 border border-gray-300 rounded-button py-3 font-semibold text-gray-700 hover:bg-gray-50 transition-colors">
                <i class="ri-google-fill ri-lg text-red-500"></i>
                <span>Google ile Giriş Yap</span>
            </button>
        </div>
    </div>

    <div id="profile-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-[100] hidden">
        <div class="bg-white rounded-lg p-8 w-full max-w-sm m-4 relative fade-in">
            <h3 class="text-2xl font-bold text-gray-800 text-center mb-2">Profilinizi Tamamlayın</h3>
            <p class="text-sm text-gray-600 mt-1 text-center mb-6">Size daha iyi hizmet verebilmemiz için bu bilgilere ihtiyacımız var.</p>
            <form id="profile-form" class="space-y-4">
                <div>
                    <label for="full-name-input" class="block text-sm font-medium text-gray-700 mb-1">Ad Soyad <span class="text-red-500">*</span></label>
                    <input type="text" id="full-name-input" required class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50">
                </div>
                <div>
                    <label for="phone-input" class="block text-sm font-medium text-gray-700 mb">Telefon Numarası <span class="text-red-500">*</span></label>
                    <input type="tel" id="phone-input" required class="w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary/50" placeholder="+90 5XX XXX XX XX">
                </div>
                <button type="submit" class="w-full bg-primary text-white py-3 rounded-button font-semibold hover:bg-primary/90 transition-colors">
                    Kaydet
                </button>
            </form>
        </div>
    </div>
</div>

<script type="module">
    // =======================================================================
    // FIREBASE VE FONKSİYON İMPORTLARI (Yorum Modülü İçin Güncellendi)
    // =======================================================================
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, signInWithPopup, GoogleAuthProvider, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    // *** Yorum Modülü için gereken ek importlar: getDoc, orderBy, deleteDoc ***
    import { getFirestore, doc, getDoc, setDoc, collection, addDoc, onSnapshot, query, where, orderBy, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";


    // =======================================================================
    // FIREBASE KONFİGÜRASYONU (Sizin mevcut kodunuzdan alınmıştır)
    // =======================================================================
    const firebaseConfig = {
        apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
        authDomain: "kibris-6b4f7.firebaseapp.com",
        projectId: "kibris-6b4f7",
        storageBucket: "kibris-6b4f7.firebasestorage.app",
        messagingSenderId: "141262926171",
        appId: "1:141262926171:web:07226845e51d4bbc0dea7e",
        measurementId: "G-JL9P6BRZTD"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    const provider = new GoogleAuthProvider();

    // =======================================================================
    // DOM ELEMENTLERİ
    // =======================================================================
    const calculateBtn = document.getElementById('calculate-btn');
    const calculatorSection = document.getElementById('calculator-section');
    const calculatorForm = document.getElementById('calculator-form');
    const productPriceInput = document.getElementById('product-price');
    const productCategorySelect = document.getElementById('product-category');
    const orderMethodSelect = document.getElementById('order-method');
    const calculationResultDiv = document.getElementById('calculation-result');
    const mainActionBtn = document.getElementById('main-action-btn');
    const resultPriceSpan = document.getElementById('result-price');
    const resultCategoryFeeSpan = document.getElementById('result-category-fee');
    const resultTotalSpan = document.getElementById('result-total');
    const resultPriceLabel = document.getElementById('result-price-label');
    const cartBadge = document.getElementById('cart-badge');
    const cartPageBtn = document.getElementById('cart-page-btn');

    // AUTH DOM ELEMENTLERİ
    const loginBtn = document.getElementById('login-btn');
    const profileContainer = document.getElementById('profile-container');
    const profileImg = document.getElementById('profile-img');
    const loginModal = document.getElementById('login-modal');
    const closeLoginModalBtn = document.getElementById('close-login-modal');
    const googleLoginBtn = document.getElementById('google-login-btn');
    const profileModal = document.getElementById('profile-modal');
    const profileForm = document.getElementById('profile-form');
    const fullNameInput = document.getElementById('full-name-input');
    const phoneInput = document.getElementById('phone-input');

    // ** YORUM MODÜLÜ DOM ELEMENTLERİ (Yeni Eklendi) **
    const reviewFormContainer = document.getElementById('review-form-container');
    const reviewForm = document.getElementById('review-form');
    const starRating = document.getElementById('star-rating');
    const reviewRatingInput = document.getElementById('review-rating');
    const reviewTextInput = document.getElementById('review-text');
    const submitReviewBtn = document.getElementById('submit-review-btn');
    const reviewLoginRequired = document.getElementById('review-login-required');
    const openLoginForReview = document.getElementById('open-login-for-review');
    const reviewsList = document.getElementById('reviews-list');
    const loadingReviews = document.getElementById('loading-reviews');
    const reviewPendingMessage = document.getElementById('review-pending-message');


    // =======================================================================
    // YARDIMCI FONKSİYONLAR
    // =======================================================================
    function showToast(message, type = 'info') {
        const toastId = 'toast-' + Date.now();
        const color = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-primary';
        const icon = type === 'success' ? 'ri-check-line' : type === 'error' ? 'ri-error-warning-line' : 'ri-information-line';

        const toastHtml = `
            <div id="${toastId}" class="fixed bottom-4 left-1/2 -translate-x-1/2 p-3 ${color} text-white rounded-lg shadow-xl flex items-center gap-2 z-[200] opacity-0 transition-opacity duration-300">
                <i class="${icon} ri-lg"></i>
                <span>${message}</span>
            </div>
        `;

        document.body.insertAdjacentHTML('beforeend', toastHtml);
        const toast = document.getElementById(toastId);

        setTimeout(() => {
            toast.style.opacity = '1';
        }, 10);

        setTimeout(() => {
            toast.style.opacity = '0';
            toast.addEventListener('transitionend', () => toast.remove());
        }, 4000);
    }

    // =======================================================================
    // YORUM MODÜLÜ İŞLEVLERİ (Yeni Eklendi)
    // =======================================================================

    // İstenen formata (A**** Y*****) göre ismi maskeler
    function maskUserName(fullName) {
        if (!fullName) return "Anonim Kullanıcı";
        const parts = fullName.trim().split(/\s+/);
        if (parts.length < 2) {
            return parts[0].charAt(0).toUpperCase() + Array(parts[0].length - 1).fill('*').join('');
        }
        const firstName = parts[0];
        const lastName = parts[parts.length - 1]; 
        const maskedFirstName = firstName.charAt(0).toUpperCase() + Array(firstName.length - 1).fill('*').join('');
        const maskedLastName = lastName.charAt(0).toUpperCase() + Array(lastName.length - 1).fill('*').join('');
        return `${maskedFirstName} ${maskedLastName}`;
    }

    // Yıldızları oluşturur ve renklendirir
    function renderStars(rating) {
        let html = '';
        for (let i = 1; i <= 5; i++) {
            const colorClass = i <= rating ? 'text-secondary' : 'text-gray-300';
            const iconClass = i <= rating ? 'ri-star-fill' : 'ri-star-line';
            html += `<i class="${iconClass} ri-lg ${colorClass}"></i>`; 
        }
        return html;
    }

    // Tek bir yorum kartını oluşturur (Silme butonu burada eklenir)
    function createReviewCard(review, maskedName, reviewDocId, reviewUserId) {
        const date = review.tarih ? new Date(review.tarih.seconds * 1000).toLocaleDateString('tr-TR') : 'Bilinmiyor';
        const user = auth.currentUser;
        
        // Yorumu yapan kişi, giriş yapan kişiyle aynıysa silme butonunu göster
        const isOwner = user && user.uid === reviewUserId;

        return `
            <div class="bg-white p-4 rounded-lg border border-gray-100 shadow-sm fade-in relative" data-review-id="${reviewDocId}">
                <div class="flex items-center justify-between mb-2">
                    <div class="text-sm font-semibold text-gray-800">${maskedName}</div>
                    <div class="flex items-center space-x-1">${renderStars(review.puan)}</div>
                </div>
                <p class="text-sm text-gray-600">${review.yorum_metni}</p>
                <div class="text-xs text-gray-400 mt-2 text-right">${date}</div>
                
                ${isOwner ? `
                    <button class="delete-review-btn absolute top-2 right-2 p-1 text-red-500 hover:text-red-700 transition-colors"
                            data-doc-id="${reviewDocId}" title="Yorumu Sil">
                        <i class="ri-delete-bin-line ri-lg"></i>
                    </button>
                ` : ''}
            </div>
        `;
    }

    // Yorumları Listeleme Fonksiyonu (Silme butonu dinleyicilerini ekler)
    async function loadAndDisplayReviews() {
        reviewsList.innerHTML = ''; 
        loadingReviews.classList.remove('hidden');

        try {
            const reviewsRef = collection(db, "yorumlar");
            const q = query(reviewsRef, 
                where("onay_durumu", "==", "Onaylandı"),
                orderBy("tarih", "desc")
            );
            const querySnapshot = await getDocs(q);
            
            if (querySnapshot.empty) {
                reviewsList.innerHTML = '<p class="text-center text-gray-500">Henüz onaylanmış bir yorum bulunmamaktadır.</p>';
                return;
            }

            const reviewPromises = querySnapshot.docs.map(async (docSnap) => {
                const review = docSnap.data();
                const reviewDocId = docSnap.id; 
                
                const userDocRef = doc(db, "users", review.kullanici_id);
                const userDoc = await getDoc(userDocRef);
                
                let userName = userDoc.exists() ? userDoc.data().fullName || userDoc.data().email : 'Bilinmeyen Kullanıcı';
                
                const maskedName = maskUserName(userName);
                return createReviewCard(review, maskedName, reviewDocId, review.kullanici_id); 
            });
            
            const reviewCards = await Promise.all(reviewPromises);
            reviewsList.innerHTML = reviewCards.join('');

            // Yorumlar yüklendikten sonra silme dinleyicilerini ekle
            addDeleteReviewListeners();

        } catch (error) {
            console.error("Yorumlar yüklenirken hata oluştu:", error);
            reviewsList.innerHTML = '<p class="text-center text-red-500">Yorumlar yüklenemedi. (Dizin hatası olabilir)</p>';
        } finally {
            loadingReviews.classList.add('hidden');
        }
    }

    // YILDIZ GÖRÜNÜMÜNÜ GÜNCELLEME
    function updateStarAppearance(rating) {
        const stars = starRating.querySelectorAll('i');
        stars.forEach(star => {
            const starValue = parseInt(star.dataset.star);
            if (starValue <= rating) {
                star.className = 'ri-star-fill ri-xl text-secondary cursor-pointer hover:text-secondary transition-colors';
            } else {
                star.className = 'ri-star-line ri-xl text-gray-300 cursor-pointer hover:text-secondary transition-colors';
            }
        });
    }

    // KULLANICININ YORUM DURUMUNU KONTROL ETME
    async function checkUserReviewStatus(userId) {
        try {
            const q = query(collection(db, "yorumlar"), where("kullanici_id", "==", userId));
            const querySnapshot = await getDocs(q);

            reviewFormContainer.classList.add('hidden');
            reviewPendingMessage.classList.add('hidden');
            reviewLoginRequired.classList.add('hidden');

            if (querySnapshot.empty) {
                reviewFormContainer.classList.remove('hidden');
                reviewForm.reset();
                reviewRatingInput.value = 0;
                reviewRatingInput.dataset.currentRating = 0;
                updateStarAppearance(0);
            } else {
                const reviewData = querySnapshot.docs[0].data();
                if (reviewData.onay_durumu === 'Beklemede') {
                    reviewFormContainer.classList.add('hidden');
                    reviewPendingMessage.classList.remove('hidden');
                } else if (reviewData.onay_durumu === 'Onaylandı') {
                    // Yorum onaylandıysa formu gizle, çünkü kullanıcı sadece bir yorum yapabilir.
                    reviewFormContainer.classList.add('hidden');
                }
            }
        } catch (error) {
            console.error("Yorum durumu kontrol edilirken hata oluştu:", error);
            reviewFormContainer.classList.add('hidden');
        }
    }

    // YORUM SİLME İŞLEMİNİ GERÇEKLEŞTİREN ANA FONKSİYON
    async function deleteReview(docId) {
        if (!confirm("Bu yorumu silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.")) {
            return;
        }
        
        const user = auth.currentUser;
        if (!user) {
            showToast("Bu işlemi yapmak için giriş yapmalısınız.", "error");
            return;
        }

        try {
            const reviewDocRef = doc(db, "yorumlar", docId);
            
            // *Güvenlik Kontrolü:* Yorumu silmeden önce, gerçekten bu kullanıcının yorumu olup olmadığını kontrol et
            const docSnap = await getDoc(reviewDocRef);
            if (docSnap.exists() && docSnap.data().kullanici_id !== user.uid) {
                showToast("Bu yorumu silme yetkiniz yok.", "error");
                return;
            }

            await deleteDoc(reviewDocRef);
            
            showToast("Yorumunuz başarıyla silindi.", "success");
            
            // UI'yı ve yorum yapma durumunu güncelle
            loadAndDisplayReviews(); 
            checkUserReviewStatus(user.uid);

        } catch (error) {
            console.error("Yorum silinirken hata oluştu:", error);
            showToast("Yorum silinemedi. Lütfen tekrar deneyin.", "error");
        }
    }

    // YENİ DİNLEYİCİ: Sil Butonlarını Dinleme Fonksiyonu
    function addDeleteReviewListeners() {
        const deleteButtons = reviewsList.querySelectorAll('.delete-review-btn');
        deleteButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                const docId = e.currentTarget.dataset.docId;
                if (docId) {
                    deleteReview(docId);
                }
            });
        });
    }


    // =======================================================================
    // AUTH VE PROFİL YÖNETİMİ
    // =======================================================================

    function updateAuthUI(user) {
        if (user) {
            loginBtn.classList.add('hidden');
            profileContainer.classList.remove('hidden');
            profileImg.src = user.photoURL || 'default-profile.png';
        } else {
            loginBtn.classList.remove('hidden');
            profileContainer.classList.add('hidden');
            profileModal.classList.add('hidden');
        }
    }

    async function checkUserProfile(user) {
        const userDocRef = doc(db, "users", user.uid);
        const userDoc = await getDoc(userDocRef);

        if (!userDoc.exists() || !userDoc.data().fullName || !userDoc.data().phone) {
            profileModal.classList.remove('hidden');
            fullNameInput.value = userDoc.data()?.fullName || user.displayName || '';
            phoneInput.value = userDoc.data()?.phone || '';
        } else {
            profileModal.classList.add('hidden');
        }
    }

    // AUTH LISTENERS
    loginBtn.addEventListener('click', () => {
        loginModal.classList.remove('hidden');
    });

    closeLoginModalBtn.addEventListener('click', () => {
        loginModal.classList.add('hidden');
    });

    googleLoginBtn.addEventListener('click', async () => {
        try {
            const result = await signInWithPopup(auth, provider);
            const user = result.user;
            loginModal.classList.add('hidden');

            const userDocRef = doc(db, "users", user.uid);
            const userDoc = await getDoc(userDocRef);

            if (!userDoc.exists()) {
                await setDoc(userDocRef, {
                    email: user.email,
                    fullName: user.displayName || '',
                    phone: '',
                    createdAt: new Date()
                }, { merge: true });
            }

            updateAuthUI(user);
            checkUserProfile(user);
            showToast("Giriş başarılı!", "success");
        } catch (error) {
            console.error("Google giriş hatası:", error);
            showToast("Giriş yapılırken bir hata oluştu.", "error");
        }
    });

    profileImg.addEventListener('click', async () => {
        if (confirm("Çıkış yapmak istediğinizden emin misiniz?")) {
            await signOut(auth);
            showToast("Başarıyla çıkış yapıldı.", "info");
        } else {
            // Profil detaylarını göstermek isterseniz burayı kullanabilirsiniz
            // checkUserProfile(auth.currentUser); 
        }
    });

    profileForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const user = auth.currentUser;
        if (!user) return;

        const fullName = fullNameInput.value.trim();
        const phone = phoneInput.value.trim();

        if (fullName.length < 3 || phone.length < 10) {
            showToast("Lütfen Ad Soyad ve Telefon alanlarını doğru doldurun.", "error");
            return;
        }

        try {
            const userDocRef = doc(db, "users", user.uid);
            await setDoc(userDocRef, {
                fullName: fullName,
                phone: phone
            }, { merge: true });

            profileModal.classList.add('hidden');
            showToast("Profil bilgileri kaydedildi.", "success");
            
            // Profil kaydedildikten sonra yorum durumunu tekrar kontrol et
            checkUserReviewStatus(user.uid); 

        } catch (error) {
            console.error("Profil güncelleme hatası:", error);
            showToast("Profil bilgileri kaydedilemedi.", "error");
        }
    });

    // =======================================================================
    // HESAPLAYICI VE SEPET İŞLEVLERİ (Mevcut kodunuz)
    // =======================================================================
    // Buraya sizin mevcut hesaplayıcı ve sepet ile ilgili kodlarınız eklenecek.
    // (Örnek olarak form dinleyicilerini bıraktım)

    calculateBtn.addEventListener('click', () => {
        calculatorSection.classList.toggle('hidden');
    });

    calculatorForm.addEventListener('submit', (e) => {
        e.preventDefault();
        // Hesaplama mantığınız burada çalışacak
        // Örnek:
        // const price = parseFloat(productPriceInput.value);
        // const category = productCategorySelect.value;
        // if (price > 0 && category) {
        //     // Hesaplama yap
        //     calculationResultDiv.classList.remove('hidden');
        //     mainActionBtn.innerHTML = '<i class="ri-shopping-cart-line"></i><span>Sepete Ekle</span>';
        //     mainActionBtn.type = 'button'; // Sepete Ekle butonuna çevir
        // } else {
        //     showToast("Lütfen tüm alanları doldurun.", "error");
        // }
    });

    // =======================================================================
    // YORUM MODÜLÜ EVENT LISTENERS (Yeni Eklendi)
    // =======================================================================

    // Yorum yapmak için giriş yap butonunu modalı açar
    openLoginForReview.addEventListener('click', () => {
        loginModal.classList.remove('hidden');
    });

    // YILDIZ Puanlama Dinleyicileri
    starRating.addEventListener('click', (e) => {
        const starElement = e.target.closest('i');
        if (starElement && starElement.dataset.star) {
            const rating = parseInt(starElement.dataset.star);
            reviewRatingInput.value = rating;
            reviewRatingInput.dataset.currentRating = rating; 
            updateStarAppearance(rating);
        }
    });

    starRating.addEventListener('mouseover', (e) => {
        const starElement = e.target.closest('i');
        if (starElement && starElement.dataset.star) {
            const hoverRating = parseInt(starElement.dataset.star);
            starRating.querySelectorAll('i').forEach(star => {
                const starValue = parseInt(star.dataset.star);
                const className = starValue <= hoverRating ? 
                    'ri-star-fill ri-xl text-secondary cursor-pointer hover:text-secondary transition-colors' : 
                    'ri-star-line ri-xl text-gray-300 cursor-pointer hover:text-secondary transition-colors';
                star.className = className;
            });
        }
    });

    starRating.addEventListener('mouseout', (e) => {
        const currentRating = parseInt(reviewRatingInput.dataset.currentRating || 0);
        updateStarAppearance(currentRating);
    });

    reviewForm.addEventListener('reset', () => {
        reviewRatingInput.value = 0;
        reviewRatingInput.dataset.currentRating = 0;
        updateStarAppearance(0);
    });

    // YORUM GÖNDERME İŞLEMİ
    reviewForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const user = auth.currentUser;
        if (!user) {
            showToast("Yorum göndermek için lütfen giriş yapın.", "error");
            return;
        }

        const rating = parseInt(reviewRatingInput.value || 0);
        const reviewText = reviewTextInput.value.trim();

        if (rating === 0 || reviewText.length < 10) {
            showToast("Lütfen 1 ile 5 arasında puan verin ve en az 10 karakter yorum yazın.", "error");
            return;
        }

        submitReviewBtn.disabled = true;
        submitReviewBtn.textContent = "Gönderiliyor...";
        reviewPendingMessage.classList.add('hidden');

        try {
            const existingReviewSnapshot = await getDocs(query(collection(db, "yorumlar"), where("kullanici_id", "==", user.uid)));

            if (!existingReviewSnapshot.empty) {
                showToast("Zaten bir yorum yaptınız. Yorumunuz onay bekliyor veya yayınlanmıştır.", "error");
                reviewFormContainer.classList.add('hidden');
                reviewPendingMessage.classList.remove('hidden');
                return;
            }

            await addDoc(collection(db, "yorumlar"), {
                kullanici_id: user.uid,
                puan: rating,
                yorum_metni: reviewText,
                tarih: new Date(),
                onay_durumu: "Beklemede"
            });

            showToast("Yorumunuz başarıyla gönderildi ve onay bekliyor.", "success");
            reviewForm.reset();
            reviewRatingInput.dataset.currentRating = 0;
            updateStarAppearance(0);
            reviewFormContainer.classList.add('hidden');
            reviewPendingMessage.classList.remove('hidden');
            // Yeni yorum eklendiğinde liste tekrar yüklensin (yeni yorum "Beklemede" olduğu için listeye eklenmeyecek, ama liste güncellenir)
            loadAndDisplayReviews(); 
            
        } catch (error) {
            console.error("Yorum gönderilirken hata oluştu:", error);
            showToast("Yorum gönderilemedi. Lütfen tekrar deneyin.", "error");
        } finally {
            submitReviewBtn.disabled = false;
            submitReviewBtn.textContent = "Yorumu Gönder";
        }
    });


    // =======================================================================
    // BAŞLANGIÇ İŞLEMLERİ
    // =======================================================================

    // Yorumları başlangıçta yükle
    loadAndDisplayReviews(); 

    // Kullanıcı Giriş Durumu Takibi
    onAuthStateChanged(auth, async user => {
        updateAuthUI(user);
        
        if (user) {
            checkUserProfile(user); 
            // listenToCart(user.uid); // Eğer sepet dinleyiciniz varsa
            
            // Giriş yapıldığında yorum durumunu kontrol et
            checkUserReviewStatus(user.uid); 
            reviewLoginRequired.classList.add('hidden');

        } else {
            // listenToCart(null); // Eğer sepet dinleyiciniz varsa
            
            // Yorum Modülü Kontrolü (Giriş yapılmadıysa)
            reviewFormContainer.classList.add('hidden');
            reviewPendingMessage.classList.add('hidden');
            reviewLoginRequired.classList.remove('hidden'); 
        }
    });

</script>

</body>
</html>
