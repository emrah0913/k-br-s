<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getir KÄ±brÄ±s | TÃ¼rkiye'den KÄ±brÄ±s'a SipariÅŸ Getirme Hizmeti</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#5d3ebc', secondary: '#ffd300' },
                    fontFamily: { inter: ['Inter', 'sans-serif'] }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none; }
        .product-slider { overflow-x: auto; scrollbar-width: none; white-space: nowrap; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
        .product-slider::-webkit-scrollbar { display: none; }
        .product-card { display: inline-block; width: 280px; margin-right: 1rem; white-space: normal; scroll-snap-align: start; }
    </style>
</head>
<body class="bg-gray-50">

<div class="w-full max-w-screen-lg mx-auto relative min-h-screen pb-16">

    <header class="fixed top-0 w-full bg-white shadow-sm z-50 px-4 py-3 flex items-center justify-between">
        <div class="flex-1"></div>
        <div class="flex flex-col items-center">
            <img src="logom.png" alt="Getir KÄ±brÄ±s" class="h-12"> 
            <div class="flex items-center gap-2 mt-1">
                <a href="index.html" class="text-[10px] font-bold text-primary uppercase" data-i18n="navHome">Ana Sayfa</a>
                <span class="text-gray-300">|</span>
                <select id="lang-select" class="text-[10px] font-bold text-primary bg-transparent outline-none cursor-pointer uppercase border border-primary/20 rounded px-1">
                    <option value="tr">TR</option>
                    <option value="en">EN</option>
                    <option value="ru">RU</option>
                    <option value="el">EL</option>
                </select>
            </div>
        </div>
        <div class="flex-1 flex justify-end">
            <div id="auth-button" class="w-8 h-8 flex items-center justify-center">
                <button id="login-btn" class="text-xs text-primary font-medium"><i class="ri-google-fill ri-lg"></i></button>
                <div id="profile-container" class="hidden">
                    <img id="profile-img" src="" class="w-8 h-8 rounded-full cursor-pointer">
                </div>
            </div>
        </div>
    </header>

    <div class="px-4 pt-28 mb-6">
        <div class="relative overflow-hidden rounded-2xl p-7 text-white shadow-xl border-b-4 border-[#ffd300]" 
             style="background: radial-gradient(circle at center, #6b46e5 0%, #4a329d 100%);">
            <div class="mb-6">
                <h2 class="text-2xl font-black tracking-tight leading-none uppercase">
                    <span data-i18n="heroTitle">Åžeffaf FiyatlandÄ±rma</span> <br>
                    <span class="text-[#ffd300] text-lg font-bold italic opacity-90" data-i18n="heroSub">SÃ¼rpriz Maliyetlere Son</span>
                </h2>
            </div>
            <div class="grid grid-cols-1 gap-4">
                <div class="bg-white/10 backdrop-blur-md p-5 rounded-xl border border-white/10">
                    <div class="flex items-center gap-4">
                        <div class="bg-white/20 w-12 h-12 rounded-lg flex items-center justify-center border border-white/30">
                            <i class="ri-box-3-line text-[#ffd300] text-2xl"></i>
                        </div>
                        <div>
                            <p class="text-[11px] uppercase tracking-widest opacity-70 font-bold" data-i18n="scopeLabel">Hizmet KapsamÄ±</p>
                            <p class="text-lg font-extrabold text-white" data-i18n="scopeDetail">GÃ¼mrÃ¼k + Kargo + Nakliye</p>
                        </div>
                    </div>
                    <div class="mt-3 pt-3 border-t border-white/10 text-[#ffd300] font-bold text-sm flex items-center gap-2">
                        <i class="ri-checkbox-circle-fill"></i>
                        <span data-i18n="allInOne">TÃœM SÃœREÃ‡ TEK FÄ°YATA DAHÄ°LDÄ°R</span>
                    </div>
                </div>
                <div class="grid grid-cols-1 gap-3 px-1">
                    <div class="flex items-center gap-3 text-sm opacity-90 font-medium"><i class="ri-arrow-right-s-line text-[#ffd300]"></i><span data-i18n="feature1">Ekstra gÃ¼mrÃ¼k vergisi talep edilmez.</span></div>
                    <div class="flex items-center gap-3 text-sm opacity-90 font-medium"><i class="ri-arrow-right-s-line text-[#ffd300]"></i><span data-i18n="feature2">Hesaplanan tutar net teslimat fiyatÄ±dÄ±r.</span></div>
                    <div class="flex items-center gap-3 text-sm opacity-90 font-medium"><i class="ri-arrow-right-s-line text-[#ffd300]"></i><span data-i18n="feature3">TÃ¼m operasyonel sÃ¼reÃ§ler tarafÄ±mÄ±zca yÃ¶netilir.</span></div>
                </div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 gap-4 px-4 mb-8">
        <a href="getirhome.html" class="bg-[#ffd300] shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 border border-[#ffd300] hover:bg-[#ffdf00] transition-all">
            <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center mb-1 overflow-hidden p-1">
                <img src="getirhome-logo.png" class="w-full h-full object-contain">
            </div>
            <span class="text-sm font-bold text-gray-900">GetirHome</span>
        </a>
        <button id="calculate-btn" class="bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 border border-gray-100 hover:border-primary/20 transition-all">
            <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-calculator-line ri-xl text-primary"></i></div>
            <span class="text-sm font-medium" data-i18n="orderNow">SipariÅŸ Ver</span>
        </button>
        <a href="sepet.html" class="relative bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 border border-gray-100">
            <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-shopping-cart-line ri-xl text-primary"></i></div>
            <span class="text-sm font-medium" data-i18n="myCart">Sepetim</span>
            <span id="cart-badge" class="absolute bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center hidden" style="top: 10px; right: 10px;">0</span>
        </a>
    </div>

    <section id="calculator-section" class="bg-white rounded-lg shadow-lg mx-auto p-6 mb-8 max-w-2xl fade-in hidden">
        <h2 class="text-xl font-semibold mb-4 text-primary" data-i18n="calcStep1">1. ÃœrÃ¼n Bilgilerini Girin</h2>
        <form id="calculator-form" class="space-y-4">
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="orderMethod">SipariÅŸ YÃ¶ntemi*</label>
                <select id="order-method" required class="w-full p-2 border border-gray-300 rounded-md text-sm">
                    <option value="service" data-i18n="method1">ÃœrÃ¼nÃ¼ benim yerime siz sipariÅŸ edin</option>
                    <option value="self" data-i18n="method2">ÃœrÃ¼nÃ¼ ben alacaÄŸÄ±m, sadece kargo hizmeti istiyorum</option>
                </select>
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="productLink">ÃœrÃ¼n Linki*</label>
                <input type="url" id="product-link" required class="w-full p-2 border border-gray-300 rounded-md" placeholder="https://...">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="productPrice">ÃœrÃ¼n FiyatÄ± (â‚º)*</label>
                <input type="number" id="product-price" required class="w-full p-2 border border-gray-300 rounded-md" placeholder="150.00" step="any">
            </div>
            <div>
                <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="category">Kategori*</label>
                <select id="product-category" required class="w-full p-2 border border-gray-300 rounded-md text-sm">
                    <option value="" disabled selected data-i18n="loading">Kategoriler YÃ¼kleniyor...</option>
                </select>
            </div>
            <div id="calculation-result" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                <h3 class="font-medium text-gray-800 mb-2" data-i18n="calcResult">ÃœrÃ¼n Getirme Maliyeti</h3>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between"><span id="result-price-label" data-i18n="priceLabel">ÃœrÃ¼n FiyatÄ±:</span><span id="result-price">0 â‚º</span></div>
                    <div class="flex justify-between"><span data-i18n="feeLabel">Kategori Hizmet Bedeli:</span><span id="result-category-fee">0 â‚º</span></div>
                    <div class="flex justify-between font-bold text-primary pt-2 border-t border-gray-200"><span data-i18n="totalLabel">Getirme Dahil Toplam:</span><span id="result-total">0 â‚º</span></div>
                </div>
            </div>
            <button type="submit" id="main-action-btn" class="w-full bg-primary text-white py-3 rounded-button font-semibold flex items-center justify-center gap-2">
                <i class="ri-calculator-line"></i><span data-i18n="calcBtn">Maliyeti Hesapla</span>
            </button>
        </form>
    </section>

    <h2 class="text-2xl font-extrabold text-gray-800 mb-4 px-4 border-l-4 border-primary ml-4" data-i18n="popularProducts">ðŸ›’ PopÃ¼ler ÃœrÃ¼nler</h2>
    <div class="product-slider flex overflow-x-auto gap-4 p-4 scrollbar-hide">
        <div class="product-card bg-white rounded-2xl shadow-lg border p-4 text-center">
            <span class="bg-green-500 text-white text-[9px] font-bold px-2 py-1 rounded mb-2 inline-block uppercase" data-i18n="freeShipping">ÃœCRETSÄ°Z KARGO</span>
            <img src="https://omhucph.com/cdn/shop/files/Sommer2025_omhu4754_POSO_40_sRGB_Low.png?v=1761298437&width=1900" class="h-32 mx-auto object-contain mb-2">
            <h3 class="text-sm font-bold truncate" data-i18n="legomKoltuk">Legom Koltuk</h3>
            <p class="text-lg font-black text-red-600">19.000,00 â‚º</p>
            <a href="getirhome.html?category=Legom+Koltuk" class="block w-full bg-primary text-white text-xs py-2 mt-2 rounded" data-i18n="buyNow">SatÄ±n Al</a>
        </div>
        <div class="product-card bg-white rounded-2xl shadow-lg border p-4 text-center">
            <span class="bg-green-500 text-white text-[9px] font-bold px-2 py-1 rounded mb-2 inline-block uppercase" data-i18n="freeShipping">ÃœCRETSÄ°Z KARGO</span>
            <img src="https://omhucph.com/cdn/shop/files/Omhu126018_W_CREAM_WHITE_-_5769_1.png?v=1761578226&width=1536" class="h-32 mx-auto object-contain mb-2">
            <h3 class="text-sm font-bold truncate" data-i18n="legomXLKoltuk">Legom XL Koltuk</h3>
            <p class="text-lg font-black text-red-600">32.000,00 â‚º</p>
            <a href="getirhome.html?view=detail&id=4EB3NPv3gcV20oDbgH1S" class="block w-full bg-primary text-white text-xs py-2 mt-2 rounded" data-i18n="buyNow">SatÄ±n Al</a>
        </div>
    </div>

    <div class="p-6 bg-white rounded-xl shadow-sm mx-4 mt-8">
        <h4 class="text-lg font-semibold mb-4 text-primary" data-i18n="warehouseTitle">KÄ±brÄ±s Depo Adresimiz</h4>
        <div class="space-y-3 text-sm text-gray-600">
            <p><i class="ri-map-pin-2-line text-primary"></i> <span data-i18n="warehouseAddress">AlaykÃ¶y Sanayi BÃ¶lgesi 1.Etap, LefkoÅŸa</span></p>
            <p><i class="ri-phone-line text-primary"></i> +90 533 860 71 82</p>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
            authDomain: "kibris-6b4f7.firebaseapp.com",
            projectId: "kibris-6b4f7",
            storageBucket: "kibris-6b4f7.firebasestorage.app",
            messagingSenderId: "141262926171",
            appId: "1:141262926171:web:07226845e51d4bbc0dea7e"
        };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        const translations = {
            tr: {
                navHome: "Ana Sayfa", heroTitle: "Åžeffaf FiyatlandÄ±rma", heroSub: "SÃ¼rpriz Maliyetlere Son",
                scopeLabel: "Hizmet KapsamÄ±", scopeDetail: "GÃ¼mrÃ¼k + Kargo + Nakliye", allInOne: "TÃœM SÃœREÃ‡ TEK FÄ°YATA DAHÄ°LDÄ°R",
                feature1: "Ekstra gÃ¼mrÃ¼k vergisi talep edilmez.", feature2: "Hesaplanan tutar net teslimat fiyatÄ±dÄ±r.", feature3: "TÃ¼m operasyonel sÃ¼reÃ§ler tarafÄ±mÄ±zca yÃ¶netilir.",
                orderNow: "SipariÅŸ Ver", myCart: "Sepetim", buyNow: "SatÄ±n Al", freeShipping: "ÃœCRETSÄ°Z KARGO",
                calcStep1: "1. ÃœrÃ¼n Bilgilerini Girin", orderMethod: "SipariÅŸ YÃ¶ntemi*", method1: "ÃœrÃ¼nÃ¼ benim yerime siz sipariÅŸ edin", method2: "ÃœrÃ¼nÃ¼ ben alacaÄŸÄ±m, sadece kargo hizmeti istiyorum",
                productLink: "ÃœrÃ¼n Linki*", productPrice: "ÃœrÃ¼n FiyatÄ± (â‚º)*", category: "Kategori*", loading: "YÃ¼kleniyor...",
                calcResult: "ÃœrÃ¼n Getirme Maliyeti", priceLabel: "ÃœrÃ¼n FiyatÄ±:", feeLabel: "Kategori Hizmet Bedeli:", totalLabel: "Getirme Dahil Toplam:",
                calcBtn: "Maliyeti Hesapla", addToCart: "Sepete Ekle", popularProducts: "ðŸ›’ PopÃ¼ler ÃœrÃ¼nler", 
                warehouseTitle: "KÄ±brÄ±s Depo Adresimiz", warehouseAddress: "AlaykÃ¶y Sanayi BÃ¶lgesi 1.Etap, LefkoÅŸa",
                legomKoltuk: "Legom Koltuk", legomXLKoltuk: "Legom XL Koltuk"
            },
            en: {
                navHome: "Home", heroTitle: "Transparent Pricing", heroSub: "No More Surprise Costs",
                scopeLabel: "Service Scope", scopeDetail: "Customs + Cargo + Shipping", allInOne: "ALL PROCESSES INCLUDED IN ONE PRICE",
                feature1: "No extra customs tax requested.", feature2: "Calculated amount is net delivery price.", feature3: "All operational processes are managed by us.",
                orderNow: "Order Now", myCart: "My Cart", buyNow: "Buy Now", freeShipping: "FREE SHIPPING",
                calcStep1: "1. Enter Product Details", orderMethod: "Order Method*", method1: "Order on my behalf", method2: "I only need shipping service",
                productLink: "Product Link*", productPrice: "Product Price (â‚º)*", category: "Category*", loading: "Loading...",
                calcResult: "Delivery Cost Calculation", priceLabel: "Product Price:", feeLabel: "Service Category Fee:", totalLabel: "Total Delivery Price:",
                calcBtn: "Calculate Cost", addToCart: "Add to Cart", popularProducts: "ðŸ›’ Popular Products",
                warehouseTitle: "Our Cyprus Warehouse", warehouseAddress: "AlaykÃ¶y Industrial Zone Phase 1, Nicosia",
                legomKoltuk: "Legom Sofa", legomXLKoltuk: "Legom XL Sofa"
            },
            ru: {
                navHome: "Ð“Ð»Ð°Ð²Ð½Ð°Ñ", heroTitle: "ÐŸÑ€Ð¾Ð·Ñ€Ð°Ñ‡Ð½Ñ‹Ðµ Ñ†ÐµÐ½Ñ‹", heroSub: "ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… ÑÐºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ð¿Ð»Ð°Ñ‚ÐµÐ¶ÐµÐ¹",
                scopeLabel: "ÐžÐ±ÑŠÐµÐ¼ ÑƒÑÐ»ÑƒÐ³", scopeDetail: "Ð¢Ð°Ð¼Ð¾Ð¶Ð½Ñ + Ð“Ñ€ÑƒÐ· + Ð”Ð¾ÑÑ‚Ð°Ð²ÐºÐ°", allInOne: "Ð’Ð¡Ð• Ð’ÐšÐ›Ð®Ð§Ð•ÐÐž Ð’ ÐžÐ”ÐÐ£ Ð¦Ð•ÐÐ£",
                feature1: "ÐÐ¸ÐºÐ°ÐºÐ¸Ñ… Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð½Ð°Ð»Ð¾Ð³Ð¾Ð².", feature2: "Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ð°Ñ ÑÑƒÐ¼Ð¼Ð° â€” Ð¸Ñ‚Ð¾Ð³Ð¾Ð²Ð°Ñ Ñ†ÐµÐ½Ð°.", feature3: "ÐœÑ‹ Ð±ÐµÑ€ÐµÐ¼ Ð½Ð° ÑÐµÐ±Ñ Ð²ÑÐµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÑ‹.",
                orderNow: "Ð—Ð°ÐºÐ°Ð·Ð°Ñ‚ÑŒ", myCart: "ÐšÐ¾Ñ€Ð·Ð¸Ð½Ð°", buyNow: "ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ", freeShipping: "Ð‘Ð•Ð¡ÐŸÐ›ÐÐ¢ÐÐÐ¯ Ð”ÐžÐ¡Ð¢ÐÐ’ÐšÐ",
                calcStep1: "1. Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð°", orderMethod: "Ð¡Ð¿Ð¾ÑÐ¾Ð± Ð·Ð°ÐºÐ°Ð·Ð°*", method1: "Ð—Ð°ÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð·Ð° Ð¼ÐµÐ½Ñ", method2: "ÐœÐ½Ðµ Ð½ÑƒÐ¶Ð½Ð° Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ°",
                productLink: "Ð¡ÑÑ‹Ð»ÐºÐ° Ð½Ð° Ñ‚Ð¾Ð²Ð°Ñ€*", productPrice: "Ð¦ÐµÐ½Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð° (â‚º)*", category: "ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ*", loading: "Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°...",
                calcResult: "Ð Ð°ÑÑ‡ÐµÑ‚ ÑÑ‚Ð¾Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸", priceLabel: "Ð¦ÐµÐ½Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð°:", feeLabel: "ÐšÐ¾Ð¼Ð¸ÑÑÐ¸Ñ Ð·Ð° ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸ÑŽ:", totalLabel: "Ð˜Ñ‚Ð¾Ð³Ð¾ Ñ Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¾Ð¹:",
                calcBtn: "Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ", addToCart: "Ð’ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ", popularProducts: "ðŸ›’ ÐŸÐ¾Ð¿ÑƒÐ»ÑÑ€Ð½Ñ‹Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹",
                warehouseTitle: "ÐÐ°Ñˆ ÑÐºÐ»Ð°Ð´ Ð½Ð° ÐšÐ¸Ð¿Ñ€Ðµ", warehouseAddress: "ÐŸÑ€Ð¾Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð½Ð°Ñ Ð·Ð¾Ð½Ð° ÐÐ»Ð°Ð¹ÐºÑ‘Ð¹, 1-Ð¹ ÑÑ‚Ð°Ð¿, ÐÐ¸ÐºÐ¾ÑÐ¸Ñ",
                legomKoltuk: "Ð”Ð¸Ð²Ð°Ð½ Legom", legomXLKoltuk: "Ð”Ð¸Ð²Ð°Ð½ Legom XL"
            },
            el: {
                navHome: "Î‘ÏÏ‡Î¹ÎºÎ®", heroTitle: "Î”Î¹Î±Ï†Î±Î½Î®Ï‚ Î¤Î¹Î¼Î¿Î»ÏŒÎ³Î·ÏƒÎ·", heroSub: "Î¤Î­Î»Î¿Ï‚ ÏƒÏ„Î¿ ÎšÏÏ…Ï†ÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚",
                scopeLabel: "Î•ÏÏÎ¿Ï‚ Î¥Ï€Î·ÏÎµÏƒÎ¹ÏŽÎ½", scopeDetail: "Î¤ÎµÎ»Ï‰Î½ÎµÎ¯Î¿ + ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬ + ÎÎ±Ï…Ï„Î¹Î»Î¯Î±", allInOne: "ÎŸÎ›Î•Î£ ÎŸÎ™ Î”Î™Î‘Î”Î™ÎšÎ‘Î£Î™Î•Î£ Î Î•Î¡Î™Î›Î‘ÎœÎ’Î‘ÎÎŸÎÎ¤Î‘Î™ Î£Î• ÎœÎ™Î‘ Î¤Î™ÎœÎ—",
                feature1: "Î”ÎµÎ½ Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ Ï„ÎµÎ»Ï‰Î½ÎµÎ¹Î±ÎºÏŒÏ‚ Ï†ÏŒÏÎ¿Ï‚.", feature2: "Î¤Î¿ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î­Î½Î¿ Ï€Î¿ÏƒÏŒ ÎµÎ¯Î½Î±Î¹ Î· ÎºÎ±Î¸Î±ÏÎ® Ï„Î¹Î¼Î® Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚.", feature3: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ­Ï‚ Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯ÎµÏ‚ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ Î±Ï€ÏŒ ÎµÎ¼Î¬Ï‚.",
                orderNow: "Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±", myCart: "ÎšÎ±Î»Î¬Î¸Î¹", buyNow: "Î‘Î³Î¿ÏÎ¬", freeShipping: "Î”Î©Î¡Î•Î‘Î ÎœÎ•Î¤Î‘Î¦ÎŸÎ¡Î™ÎšÎ‘",
                calcStep1: "1. Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚", orderMethod: "ÎœÎ­Î¸Î¿Î´Î¿Ï‚ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚*", method1: "Î Î±ÏÎ±Î³Î³ÎµÎ¯Î»ÎµÏ„Îµ Î³Î¹Î± Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ Î¼Î¿Ï…", method2: "Î˜Î± Ï„Î¿ Î±Î³Î¿ÏÎ¬ÏƒÏ‰ Î¿ Î¯Î´Î¹Î¿Ï‚, Ï‡ÏÎµÎ¹Î¬Î¶Î¿Î¼Î±Î¹ Î¼ÏŒÎ½Î¿ Î¼ÎµÏ„Î±Ï†Î¿ÏÎ¬",
                productLink: "Î£ÏÎ½Î´ÎµÏƒÎ¼Î¿Ï‚ Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚*", productPrice: "Î¤Î¹Î¼Î® Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚ (â‚º)*", category: "ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±*", loading: "Î¦ÏŒÏÏ„Ï‰ÏƒÎ·...",
                calcResult: "Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎšÏŒÏƒÏ„Î¿Ï…Ï‚ Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚", priceLabel: "Î¤Î¹Î¼Î® Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚:", feeLabel: "Î§ÏÎ­Ï‰ÏƒÎ· ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚:", totalLabel: "Î£Ï…Î½Î¿Î»Î¹ÎºÎ® Î¤Î¹Î¼Î® Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚:",
                calcBtn: "Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚", addToCart: "Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÏ„Î¿ ÎšÎ±Î»Î¬Î¸Î¹", popularProducts: "ðŸ›’ Î”Î·Î¼Î¿Ï†Î¹Î»Î® Î ÏÎ¿ÏŠÏŒÎ½Ï„Î±",
                warehouseTitle: "Î— Î‘Ï€Î¿Î¸Î®ÎºÎ· Î¼Î±Ï‚ ÏƒÏ„Î·Î½ ÎšÏÏ€ÏÎ¿", warehouseAddress: "Î’Î¹Î¿Î¼Î·Ï‡Î±Î½Î¹ÎºÎ® Î ÎµÏÎ¹Î¿Ï‡Î® Î‘Î»Î±ÏŠÎºÏŒÎ¹, Î¦Î¬ÏƒÎ· 1, Î›ÎµÏ…ÎºÏ‰ÏƒÎ¯Î±",
                legomKoltuk: "ÎšÎ±Î½Î±Ï€Î­Ï‚ Legom", legomXLKoltuk: "ÎšÎ±Î½Î±Ï€Î­Ï‚ Legom XL"
            }
        };

        function changeLanguage(lang) {
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (translations[lang][key]) {
                    el.textContent = translations[lang][key];
                }
            });
            localStorage.setItem('prefLang', lang);
            updateDynamicButtons(lang);
        }

        function updateDynamicButtons(lang) {
            const btn = document.getElementById('main-action-btn');
            if (btn && btn.querySelector('span')) {
                const span = btn.querySelector('span');
                if (document.getElementById('calculation-result').classList.contains('hidden')) {
                    span.textContent = translations[lang].calcBtn;
                } else {
                    span.textContent = translations[lang].addToCart;
                }
            }
        }

        document.getElementById('lang-select').onchange = (e) => changeLanguage(e.target.value);
        const savedLang = localStorage.getItem('prefLang') || 'tr';
        document.getElementById('lang-select').value = savedLang;
        changeLanguage(savedLang);

        // HESAPLAMA
        let pricingSettings = { categoryRates: { furniture: 0.7, clothing: 0.45, cosmetics: 0.7, stationery: 0.4 } };
        document.getElementById('calculate-btn').onclick = () => { 
            const s = document.getElementById('calculator-section'); s.classList.remove('hidden'); s.scrollIntoView({behavior:'smooth'});
        };

        document.getElementById('calculator-form').onsubmit = async (e) => {
            e.preventDefault();
            const lang = document.getElementById('lang-select').value;
            const actionBtn = document.getElementById('main-action-btn');
            
            if (actionBtn.innerText.includes(translations[lang].calcBtn)) {
                const price = parseFloat(document.getElementById('product-price').value);
                const cat = document.getElementById('product-category').value;
                const method = document.getElementById('order-method').value;
                const fee = price * (pricingSettings.categoryRates[cat] || 0);
                const total = (method === 'self') ? fee : price + fee;

                document.getElementById('result-price').textContent = price.toFixed(2) + " â‚º";
                document.getElementById('result-category-fee').textContent = fee.toFixed(2) + " â‚º";
                document.getElementById('result-total').textContent = total.toFixed(2) + " â‚º";
                document.getElementById('calculation-result').classList.remove('hidden');
                actionBtn.querySelector('span').textContent = translations[lang].addToCart;
            } else {
                const user = auth.currentUser;
                if (!user) return alert("Please Login");
                await addDoc(collection(db, 'users', user.uid, 'cart'), {
                    productLink: document.getElementById('product-link').value,
                    productPrice: parseFloat(document.getElementById('product-price').value),
                    category: document.getElementById('product-category').value,
                    orderMethod: document.getElementById('order-method').value,
                    quantity: 1, addedAt: new Date()
                });
                location.href = 'sepet.html';
            }
        };

        // Kategoriler
        const catSelect = document.getElementById('product-category');
        const catNames = { furniture: "Mobilya / Ev", clothing: "Giyim / AyakkabÄ±", cosmetics: "Kozmetik", stationery: "Kitap / KÄ±rtasiye" };
        Object.keys(pricingSettings.categoryRates).forEach(k => {
            const o = document.createElement('option'); o.value = k; o.textContent = catNames[k]; catSelect.appendChild(o);
        });

        // Auth
        onAuthStateChanged(auth, user => {
            if (user) {
                document.getElementById('login-btn').classList.add('hidden');
                document.getElementById('profile-container').classList.remove('hidden');
                document.getElementById('profile-img').src = user.photoURL;
                onSnapshot(collection(db, 'users', user.uid, 'cart'), s => {
                    const b = document.getElementById('cart-badge');
                    b.textContent = s.size; b.classList.toggle('hidden', s.size === 0);
                });
            }
        });
    </script>
</div>
</body>
</html>
