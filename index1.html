<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÃ¼rkiye'den KÄ±brÄ±s'a SipariÅŸ Getirme Hizmeti | Getir KÄ±brÄ±s</title>

    <meta name="description" content="Trendyol, Hepsiburada ve diÄŸer TÃ¼rkiye sitelerinden KÄ±brÄ±s'a kolayca Ã¼rÃ¼n getirin. HesaplayÄ±n ve sepetinize ekleyin.">
    <link rel="canonical" href="https://getirkibris.com" />
    <link rel="icon" href="/favicon.ico?v=2" type="image/x-icon">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5d3ebc',
                        secondary: '#ffd300'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                    borderRadius: {
                        'button': '8px',
                        'none': '0px',
                        'sm': '4px',
                        DEFAULT: '8px',
                        'md': '12px',
                        'lg': '16px',
                        'xl': '20px',
                        '2xl': '24px',
                        '3xl': '32px',
                        'full': '9999px',
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f9f9f9; }
        .copy-btn:active, .auth-button:active { transform: scale(0.95); }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none; }
        .product-slider { overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; white-space: nowrap; padding-bottom: 1rem; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
        .product-slider::-webkit-scrollbar { display: none; }
        .product-card { display: inline-block; width: 300px; margin-right: 1.5rem; white-space: normal; scroll-snap-align: start; }
    </style>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-JL9P6BRZTD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-JL9P6BRZTD');
</script>

</head>
<body class="bg-gray-50">

<div class="w-full max-w-screen-lg mx-auto relative min-h-screen pb-16">

    <header class="fixed top-0 w-full bg-white shadow-sm z-50 px-4 py-3 flex items-center">
        <div class="flex-1"></div>
        <div class="flex flex-col items-center">
            <img src="logom.png" alt="Getir KÄ±brÄ±s" class="h-12"> 
            <a href="https://getirkibris.com/index.html" class="text-sm font-medium text-primary mt-1">Ana Sayfa</a>
        </div>
        <div class="flex-1 flex justify-end">
            <div id="auth-button" class="w-8 h-8 flex items-center justify-center">
                <button id="login-btn" class="text-xs text-primary font-medium cursor-pointer">
                    <i class="ri-google-fill ri-lg"></i>
                </button>
                <div id="profile-container" class="hidden">
                    <img id="profile-img" src="" alt="Profil" class="w-8 h-8 rounded-full cursor-pointer">
                </div>
            </div>
        </div>
    </header>

   <main class="pt-16 pb-20">
      <div class="relative w-full overflow-hidden mb-6" style="padding-top: 56.25%;">
        <iframe class="absolute top-0 left-0 w-full h-full" src="https://www.youtube.com/embed/YYNLzJJKTXs" frameborder="0" allowfullscreen></iframe>
        <div class="absolute inset-0 bg-gradient-to-t from-[#5b21b6]/25 via-transparent to-transparent pointer-events-none"></div>
        <div class="absolute inset-x-0 bottom-0 h-20 bg-gradient-to-t from-[#5b21b6]/40 to-transparent pointer-events-none"></div>
      </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 px-4 mb-8">
            <button id="calculate-btn" class="bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 cursor-pointer border border-gray-100 hover:border-primary/20 transition-all">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-calculator-line ri-xl text-primary"></i></div>
                <span class="text-sm font-medium">SipariÅŸ Ver</span>
            </button>
            <a href="https://getirkibris.com/sepet.html" id="cart-page-btn" class="relative bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 cursor-pointer border border-gray-100 hover:border-primary/20 transition-all">
                <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-shopping-cart-line ri-xl text-primary"></i></div>
                <span class="text-sm font-medium">Sepetim</span>
                <span id="cart-badge" class="absolute bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center hidden" style="top: 10px; right: 10px;">0</span>
            </a>
        </div>

        <section id="calculator-section" class="bg-white rounded-lg shadow-lg mx-auto p-6 mb-8 max-w-2xl fade-in hidden">
            <h2 class="text-xl font-semibold mb-4 text-primary">1. ÃœrÃ¼n Bilgilerini Girin</h2>
            <form id="calculator-form" class="space-y-4">
                <div>
                    <label for="order-method" class="block text-sm font-medium text-gray-700 mb-1">SipariÅŸ YÃ¶ntemi<span class="text-red-500">*</span></label>
                    <select id="order-method" required class="w-full p-2 border border-gray-300 rounded-md text-sm">
                        <option value="service" selected>ÃœrÃ¼nÃ¼ benim yerime siz sipariÅŸ edin</option>
                        <option value="self">ÃœrÃ¼nÃ¼ ben alacaÄŸÄ±m, sadece kargo hizmeti istiyorum</option>
                    </select>
                </div>
                <div>
                    <label for="product-link" class="block text-sm font-medium text-gray-700 mb-1">ÃœrÃ¼n Linki<span class="text-red-500">*</span></label>
                    <input type="url" id="product-link" required class="w-full p-2 border border-gray-300 rounded-md" placeholder="https://...">
                </div>
                <div>
                    <label for="product-price" class="block text-sm font-medium text-gray-700 mb-1">ÃœrÃ¼n FiyatÄ± (â‚º)<span class="text-red-500">*</span></label>
                    <input type="number" id="product-price" required class="w-full p-2 border border-gray-300 rounded-md" placeholder="150.00" step="any">
                </div>
                <div>
                    <label for="product-category" class="block text-sm font-medium text-gray-700 mb-1">Kategori<span class="text-red-500">*</span></label>
                    <select id="product-category" required class="w-full p-2 border border-gray-300 rounded-md text-sm">
                        <option value="" disabled selected>Kategoriler YÃ¼kleniyor...</option>
                    </select>
                </div>
                <div id="calculation-result" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
                    <h3 class="font-medium text-gray-800 mb-2">ÃœrÃ¼n Getirme Maliyeti</h3>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between"><span id="result-price-label">ÃœrÃ¼n FiyatÄ±:</span><span id="result-price">0 â‚º</span></div>
                        <div class="flex justify-between"><span>Kategori Hizmet Bedeli:</span><span id="result-category-fee">0 â‚º</span></div>
                        <div class="flex justify-between font-bold text-primary pt-2 border-t border-gray-200"><span>NET TOPLAM:</span><span id="result-total">0 â‚º</span></div>
                    </div>
                </div>
                <button type="submit" id="main-action-btn" class="w-full bg-primary text-white py-3 rounded-button font-semibold">Maliyeti Hesapla</button>
            </form>
        </section>

        <h2 class="text-3xl font-extrabold text-gray-800 mb-6 text-center border-b-4 border-primary pb-3 tracking-tight">ğŸ›’ En PopÃ¼ler ÃœrÃ¼nler & FÄ±rsatlar</h2>
        <div class="max-w-4xl mx-auto">
            <div class="product-slider flex snap-x snap-mandatory">
                <div class="product-card bg-white shadow-xl hover:shadow-2xl transition-shadow duration-300 rounded-xl overflow-hidden text-center flex-shrink-0">
                    <img src="https://cdn.dsmcdn.com/ty1339/product/media/images/prod/QC/20240531/13/4f260764-0e89-3345-85d3-c78b2860a122/1_org_zoom.jpg" class="w-full h-100 object-contain p-2 rounded-2xl">
                    <div class="p-4">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 truncate">Legom Aktivite KoltuÄŸu & Yatak</h3>
                        <p class="text-sm text-gray-500 mb-1">Trendyol'dan GÃ¶nderim</p>
                        <p class="text-xl font-extrabold text-red-600 mb-4">12.635,00 â‚º</p>
                        <a href="https://www.trendyol.com/good-night/legom-aktivite-koltugu-yatak-cok-amacli-p-833506385" target="_blank" class="inline-block w-full bg-primary text-white font-semibold py-2 rounded-lg">SatÄ±n Al</a>
                    </div>
                </div>
                <div class="product-card bg-white shadow-xl hover:shadow-2xl transition-shadow duration-300 rounded-xl overflow-hidden text-center flex-shrink-0">
                    <img src="https://cdn.dsmcdn.com/ty1583/prod/QC/20241008/22/36a5c729-891b-369b-9235-de1c4459aab2/1_org_zoom.jpg" class="w-full h-100 object-contain p-2 rounded-2xl">
                    <div class="p-4">
                        <h3 class="text-lg font-bold text-gray-800 mb-2 truncate">3'lÃ¼ KÄ±ÅŸlÄ±k Ev TerliÄŸi</h3>
                        <p class="text-sm text-gray-500 mb-1">Trendyol'dan GÃ¶nderim</p>
                        <p class="text-xl font-extrabold text-red-600 mb-4">289,90 â‚º</p>
                        <a href="https://www.trendyol.com/star-shoes/3-lu-kislik-ev-terligi-p-864790548" target="_blank" class="inline-block w-full bg-primary text-white font-semibold py-2 rounded-lg">SatÄ±n Al</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="px-4 mb-8 mt-12">
            <h3 class="text-lg font-semibold mb-4">PopÃ¼ler AlÄ±ÅŸveriÅŸ Siteleri</h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                
                <a href="https://www.trendyol.com" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100">
                    <img src="https://www.freelogovectors.net/wp-content/uploads/2024/01/trendyol_logo-freelogovectors.net_.png" class="w-16 h-16 object-contain">
                    <span class="hidden">KÄ±brÄ±s'ta Trendyol var mÄ±, TÃ¼rkiye'den KÄ±brÄ±s'a Trendyol kargo, Trendyol KÄ±brÄ±s alÄ±ÅŸveriÅŸ, Trendyol KÄ±brÄ±s sipariÅŸ, KÄ±brÄ±s Trendyol Ã¼rÃ¼nleri, Trendyol KÄ±brÄ±s teslim, Trendyol TÃ¼rkiyeâ€™den gÃ¶nderim, KÄ±brÄ±s Trendyol fÄ±rsatlarÄ±, Trendyol kampanya KÄ±brÄ±s, Trendyol Ã¼rÃ¼n fiyatlarÄ± KÄ±brÄ±s, Trendyol KÄ±brÄ±s alÄ±ÅŸveriÅŸ sitesi, Trendyol KÄ±brÄ±s hÄ±zlÄ± kargo, Trendyol KÄ±brÄ±s gÃ¼venli alÄ±ÅŸveriÅŸ, Trendyol KÄ±brÄ±s indirim, KÄ±brÄ±s Trendyol sipariÅŸ sÃ¼reci, Trendyol KÄ±brÄ±s popÃ¼ler Ã¼rÃ¼nler, Trendyol KÄ±brÄ±s customer yorumlarÄ±, Trendyol KÄ±brÄ±s Ã¶deme seÃ§enekleri, Trendyol KÄ±brÄ±s elektronik Ã¼rÃ¼nleri, Trendyol KÄ±brÄ±s moda Ã¼rÃ¼nleri, Trendyol KÄ±brÄ±s ev dekorasyonu, Trendyol KÄ±brÄ±s kÄ±yafet, Trendyol KÄ±brÄ±s ayakkabÄ±, Trendyol KÄ±brÄ±s Ã§anta, Trendyol KÄ±brÄ±s indirimli Ã¼rÃ¼nler, Trendyol KÄ±brÄ±s Ã¼cretsiz kargo, KÄ±brÄ±s Trendyol sipariÅŸ takibi, Trendyol KÄ±brÄ±s alÄ±ÅŸveriÅŸ rehberi</span>
                </a>

                <a href="https://www.hepsiburada.com" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100">
                    <img src="https://www.ideasoft.com.tr/wp-content/uploads/2022/05/Hepsiburada-Logo-Transparan.png" class="w-16 h-16 object-contain">
                    <span class="hidden">Hepsiburada KÄ±brÄ±s, TÃ¼rkiye'den KÄ±brÄ±s'a Hepsiburada kargo, Hepsiburada alÄ±ÅŸveriÅŸ, Hepsiburada KÄ±brÄ±s sipariÅŸ, KÄ±brÄ±s Hepsiburada Ã¼rÃ¼nleri, Hepsiburada KÄ±brÄ±s teslim, Hepsiburada TÃ¼rkiyeâ€™den gÃ¶nderim, KÄ±brÄ±s Hepsiburada fÄ±rsatlarÄ±, Hepsiburada kampanya KÄ±brÄ±s, Hepsiburada Ã¼rÃ¼n fiyatlarÄ± KÄ±brÄ±s, Hepsiburada KÄ±brÄ±s alÄ±ÅŸveriÅŸ sitesi, Hepsiburada KÄ±brÄ±s hÄ±zlÄ± kargo, Hepsiburada KÄ±brÄ±s gÃ¼venli alÄ±ÅŸveriÅŸ, Hepsiburada KÄ±brÄ±s indirim, KÄ±brÄ±s Hepsiburada sipariÅŸ sÃ¼reci, Hepsiburada KÄ±brÄ±s popÃ¼ler Ã¼rÃ¼nler, Hepsiburada KÄ±brÄ±s customer yorumlarÄ±, Hepsiburada KÄ±brÄ±s Ã¶deme seÃ§enekleri, Hepsiburada KÄ±brÄ±s elektronik Ã¼rÃ¼nleri, Hepsiburada KÄ±brÄ±s moda Ã¼rÃ¼nleri, Hepsiburada KÄ±brÄ±s ev dekorasyonu</span>
                </a>

                <a href="https://www.n11.com" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/6/60/N11_logo.svg" class="w-16 h-16 object-contain">
                    <span class="hidden">N11 KÄ±brÄ±s, TÃ¼rkiye'den KÄ±brÄ±s'a N11 kargo, N11 KÄ±brÄ±s alÄ±ÅŸveriÅŸ, N11 KÄ±brÄ±s sipariÅŸ, KÄ±brÄ±s N11 Ã¼rÃ¼nleri, N11 KÄ±brÄ±s teslim, N11 TÃ¼rkiyeâ€™den gÃ¶nderim, KÄ±brÄ±s N11 fÄ±rsatlarÄ±, N11 kampanya KÄ±brÄ±s, N11 Ã¼rÃ¼n fiyatlarÄ± KÄ±brÄ±s, N11 KÄ±brÄ±s alÄ±ÅŸveriÅŸ sitesi, N11 KÄ±brÄ±s hÄ±zlÄ± kargo, N11 KÄ±brÄ±s gÃ¼venli alÄ±ÅŸveriÅŸ, N11 KÄ±brÄ±s indirim, N11 KÄ±brÄ±s popÃ¼ler Ã¼rÃ¼nler, N11 KÄ±brÄ±s customer yorumlarÄ±, N11 KÄ±brÄ±s Ã¶deme seÃ§enekleri</span>
                </a>

                <a href="https://www.amazon.com.tr" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZvIiXt3ogobFi7dC0k1dMgpNvrwiTQl6cbA&s" class="w-16 h-16 object-contain">
                    <span class="hidden">Amazon KÄ±brÄ±s, TÃ¼rkiye'den KÄ±brÄ±s'a Amazon kargo, Amazon KÄ±brÄ±s alÄ±ÅŸveriÅŸ, Amazon KÄ±brÄ±s sipariÅŸ, KÄ±brÄ±s Amazon Ã¼rÃ¼nleri, Amazon KÄ±brÄ±s teslim, Amazon TÃ¼rkiyeâ€™den gÃ¶nderim, KÄ±brÄ±s Amazon fÄ±rsatlarÄ±, Amazon kampanya KÄ±brÄ±s, Amazon Ã¼rÃ¼n fiyatlarÄ± KÄ±brÄ±s, Amazon KÄ±brÄ±s alÄ±ÅŸveriÅŸ sitesi, Amazon KÄ±brÄ±s hÄ±zlÄ± kargo</span>
                </a>
                
                </div>
        </div>

        <div class="mt-8 bg-gray-50 p-6 rounded-xl shadow-sm mx-4">
            <h3 class="text-xl font-semibold mb-3 text-gray-800">SipariÅŸ YÃ¶ntemleri</h3>
            <div class="space-y-6">
                <div class="bg-white p-4 rounded-lg shadow">
                    <h4 class="font-semibold text-lg text-indigo-700 mb-2">1ï¸âƒ£ ÃœrÃ¼nÃ¼ Benim Yerime SipariÅŸ Edin</h4>
                    <p class="text-gray-700">ÃœrÃ¼nÃ¼ sizin yerinize biz sipariÅŸ ediyoruz. Ã–demeyi bize yapÄ±yorsunuz, tÃ¼m sÃ¼reci biz takip ediyoruz. ÃœrÃ¼n elinize teslim edilene kadar Getir KÄ±brÄ±s gÃ¼vencesindesiniz.</p>
                </div>

                <div class="bg-white p-4 rounded-lg shadow">
                    <h4 class="font-semibold text-lg text-indigo-700 mb-2">2ï¸âƒ£ ÃœrÃ¼nÃ¼ Ben AlacaÄŸÄ±m Sadece Kargo Hizmeti Ä°stiyorum</h4>
                    <p class="text-gray-700">Bu yÃ¶ntemde alÄ±ÅŸveriÅŸi kendiniz yaparsÄ±nÄ±z. YalnÄ±zca TÃ¼rkiye'deki gÃ¶nderim adresi olarak Getir KÄ±brÄ±s deposu adresini girmelisiniz:</p>
                    <div class="bg-gray-100 p-3 rounded-lg mt-3">
                        <p class="font-semibold text-sm text-gray-800">Getir KÄ±brÄ±s TÃ¼rkiye Adresi:</p>
                        <p class="text-sm text-gray-700"><strong>Adres:</strong> AydÄ±n, Nazilli, Bozyurt Mah. Kanal ÃœstÃ¼ 3281 sk. No:3 <br><strong>Telefon:</strong> +90 547 190 19 88 <br><strong>Ad Soyad:</strong> Emrah Kutlu</p>
                    </div>
                    <p class="text-gray-700 mt-3">ÃœrÃ¼n bu adrese ulaÅŸtÄ±ÄŸÄ±nda biz sizin adÄ±nÄ±za teslim alÄ±r, KÄ±brÄ±sâ€™a kargo ile gÃ¶nderimini saÄŸlarÄ±z.</p>
                </div>
            </div>
        </div>

        <section id="item-cargo-section" class="bg-white rounded-lg shadow-lg mx-auto p-6 my-8 max-w-2xl fade-in hidden">
            <h2 class="text-xl font-semibold mb-4 text-primary text-center">EÅŸya GÃ¶nderim Hesaplama</h2>
            <div class="space-y-4">
                <input type="text" id="item-search" class="w-full p-3 border border-gray-300 rounded-md" placeholder="EÅŸya Ara (BuzdolabÄ±, Koli vb.)...">
                <div id="search-results" class="mt-1 bg-white border border-gray-200 rounded-md hidden max-h-48 overflow-y-auto"></div>
                <div id="cargo-list-container" class="hidden border-t pt-4">
                    <div id="cargo-items-list" class="space-y-2"></div>
                    <div class="flex justify-between font-bold mt-4"><span>NET TOPLAM:</span><span id="cargo-total-amount">0 â‚º</span></div>
                </div>
                <button id="add-cargo-to-cart-fixed" class="w-full bg-primary text-white py-3 rounded-button font-semibold">Hepsini Sepete Ekle</button>
            </div>
        </section>

        <div class="mt-6 px-4">
            <h4 class="text-lg font-semibold mb-4">KÄ±brÄ±s Depo Adresimiz</h4>
            <div class="space-y-4">
                <div class="flex items-start gap-3">
                    <i class="ri-map-pin-2-line text-primary"></i>
                    <div><h5 class="font-medium text-gray-800">Adres</h5><p class="text-sm text-gray-600">AlaykÃ¶y Sanayi BÃ¶lgesi 1.Etap, 3.Cadde, 8.Sokak, LefkoÅŸa, KKTC Moben Trading</p></div>
                </div>
            </div>
        </div>

    </main>

    <div id="selection-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-[100] hidden px-4">
        <div class="bg-white rounded-2xl p-6 w-full max-w-lg relative">
            <button id="close-selection-modal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-600"><i class="ri-close-line ri-xl"></i></button>
            <h3 class="text-xl font-bold text-center mb-6 text-primary">NasÄ±l YardÄ±mcÄ± Olabiliriz?</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                <button id="opt-link-order" class="p-6 border-2 border-gray-100 rounded-xl hover:border-primary/50">Link ile SatÄ±n Al</button>
                <button id="opt-cargo-order" class="p-6 border-2 border-gray-100 rounded-xl hover:border-primary/50">Kargo Hesapla</button>
            </div>
        </div>
    </div>

    <a href="https://wa.me/905471901988" target="_blank" class="fixed bottom-20 right-4 z-50 bg-[#25D366] rounded-full shadow-lg flex items-center justify-center p-6">
        <i class="ri-whatsapp-line ri-xl text-white"></i>
    </a>

</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
        authDomain: "kibris-6b4f7.firebaseapp.com",
        projectId: "kibris-6b4f7",
        storageBucket: "kibris-6b4f7.firebasestorage.app",
        messagingSenderId: "141262926171",
        appId: "1:141262926171:web:07226845e51d4bbc0dea7e"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    let pricingSettings = {};

    async function loadPricingSettings() {
        const docSnap = await getDoc(doc(db, "settings", "pricing"));
        pricingSettings = docSnap.exists() ? docSnap.data() : { categoryRates: { clothing: 0.45, furniture: 0.70 } };
        const select = document.getElementById('product-category');
        select.innerHTML = '<option value="" disabled selected>Kategori SeÃ§in</option>';
        Object.keys(pricingSettings.categoryRates).forEach(cat => {
            const opt = document.createElement('option'); opt.value = cat; opt.textContent = cat; select.appendChild(opt);
        });
    }

    onAuthStateChanged(auth, user => {
        if(user) {
            document.getElementById('profile-img').src = user.photoURL;
            document.getElementById('profile-container').classList.remove('hidden');
            document.getElementById('login-btn').classList.add('hidden');
            onSnapshot(collection(db, 'users', user.uid, 'cart'), snap => {
                document.getElementById('cart-badge').textContent = snap.size;
                document.getElementById('cart-badge').classList.toggle('hidden', snap.size === 0);
            });
        }
    });

    // Hesaplama ve Sepet Buton MantÄ±ÄŸÄ±
    document.getElementById('calculator-form').onsubmit = async (e) => {
        e.preventDefault();
        const user = auth.currentUser;
        if(!user) { alert("LÃ¼tfen giriÅŸ yapÄ±n"); return; }

        const btn = document.getElementById('main-action-btn');
        const price = parseFloat(document.getElementById('product-price').value);
        const category = document.getElementById('product-category').value;
        const method = document.getElementById('order-method').value;

        const rate = pricingSettings.categoryRates[category] || 0;
        const fee = price * rate;
        const netTotal = method === 'service' ? price + fee : fee;

        if(btn.textContent.trim() === "Maliyeti Hesapla") {
            document.getElementById('result-price').textContent = price.toFixed(2) + " â‚º";
            document.getElementById('result-category-fee').textContent = fee.toFixed(2) + " â‚º";
            document.getElementById('result-total').textContent = netTotal.toFixed(2) + " â‚º";
            document.getElementById('calculation-result').classList.remove('hidden');
            btn.textContent = "Sepete Ekle";
        } else {
            await addDoc(collection(db, 'users', user.uid, 'cart'), {
                productPrice: Number(price.toFixed(2)),
                totalPrice: Number(netTotal.toFixed(2)),
                category: category,
                orderMethod: method,
                productLink: document.getElementById('product-link').value,
                quantity: 1,
                addedAt: new Date()
            });
            window.location.href = 'https://getirkibris.com/sepet.html';
        }
    };

    // Kargo Ekleme MantÄ±ÄŸÄ±
    document.getElementById('add-cargo-to-cart-fixed').onclick = async () => {
        const user = auth.currentUser;
        if(!user || window.selectedCargoItems.length === 0) return;
        for (const item of window.selectedCargoItems) {
            await addDoc(collection(db, 'users', user.uid, 'cart'), {
                productPrice: Number(item.price),
                totalPrice: Number(item.price),
                category: "furniture",
                orderMethod: "self",
                productLink: "Kargo Hizmeti",
                name: "EÅŸya: " + item.name,
                quantity: 1,
                addedAt: new Date()
            });
        }
        window.location.href = 'https://getirkibris.com/sepet.html';
    };

    loadPricingSettings();
</script>

<script>
    // GLOBAL KARGO LÄ°STESÄ° VE DUMMY DATA
    window.selectedCargoItems = [];
    const dummy = [{name: 'BulaÅŸÄ±k Makinesi', p: 1500}, {name: 'BuzdolabÄ± (Solo)', p: 2500}, {name: 'Ã‡amaÅŸÄ±r Makinesi', p: 1400}, {name: 'Koli', p: 150}];
    
    document.getElementById('item-search').oninput = (e) => {
        const term = e.target.value.toLowerCase();
        const results = document.getElementById('search-results');
        if(term.length < 2) { results.classList.add('hidden'); return; }
        const filt = dummy.filter(i => i.name.toLowerCase().includes(term));
        results.innerHTML = filt.map(i => `<div class="p-3 hover:bg-gray-100 cursor-pointer border-b" onclick="addCargo('${i.name}', ${i.p})">${i.name} - ${i.p} â‚º</div>`).join('');
        results.classList.remove('hidden');
    };

    window.addCargo = (n, p) => {
        window.selectedCargoItems.push({name: n, price: p, id: Date.now()});
        document.getElementById('item-search').value = '';
        document.getElementById('search-results').classList.add('hidden');
        renderCargo();
    };

    function renderCargo() {
        const list = document.getElementById('cargo-items-list');
        let sum = 0;
        list.innerHTML = window.selectedCargoItems.map(i => { sum += i.price; return `<div class="flex justify-between p-2"><span>${i.name}</span><b>${i.price} â‚º</b></div>`; }).join('');
        document.getElementById('cargo-total-amount').textContent = sum + " â‚º";
        document.getElementById('cargo-list-container').classList.remove('hidden');
    }

    document.getElementById('calculate-btn').onclick = () => document.getElementById('selection-modal').classList.remove('hidden');
    document.getElementById('opt-link-order').onclick = () => { document.getElementById('selection-modal').classList.add('hidden'); document.getElementById('calculator-section').classList.remove('hidden'); };
    document.getElementById('opt-cargo-order').onclick = () => { document.getElementById('selection-modal').classList.add('hidden'); document.getElementById('item-cargo-section').classList.remove('hidden'); };
    document.getElementById('close-selection-modal').onclick = () => document.getElementById('selection-modal').classList.add('hidden');
</script>

</body>
</html>
