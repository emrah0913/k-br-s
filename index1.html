<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÃ¼rkiye'den KÄ±brÄ±s'a SipariÅŸ Getirme Hizmeti | Getir KÄ±brÄ±s</title>

    <meta name="description" content="Trendyol, Hepsiburada ve diÄŸer TÃ¼rkiye sitelerinden KÄ±brÄ±s'a kolayca Ã¼rÃ¼n getirin. HesaplayÄ±n ve sepetinize ekleyin.">
    <link rel="canonical" href="https://getirkibris.com" />
    <link rel="icon" href="/favicon.ico?v=2" type="image/x-icon">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { primary: '#5d3ebc', secondary: '#ffd300' },
                    fontFamily: { inter: ['Inter', 'sans-serif'] },
                    borderRadius: { 'button': '8px', DEFAULT: '8px' }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f9f9f9; }
        .copy-btn:active, .auth-button:active { transform: scale(0.95); }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none; }
        .product-slider { overflow-x: auto; scrollbar-width: none; -ms-overflow-style: none; white-space: nowrap; padding-bottom: 1rem; scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
        .product-slider::-webkit-scrollbar { display: none; }
        .product-card { display: inline-block; width: 300px; margin-right: 1.5rem; white-space: normal; scroll-snap-align: start; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    </style>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-JL9P6BRZTD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-JL9P6BRZTD');
    </script>
</head>
<body class="bg-gray-50">

<div class="w-full max-w-screen-lg mx-auto relative min-h-screen pb-16">

    <header class="fixed top-0 w-full bg-white shadow-sm z-50 px-4 py-3 flex items-center">
        <div class="flex-1"></div>
        <div class="flex flex-col items-center text-center">
            <img src="logom.png" alt="Getir KÄ±brÄ±s" class="h-12"> 
            <div class="flex items-center gap-2 mt-1">
                <a href="index.html" class="text-[10px] font-bold text-primary uppercase" data-i18n="navHome">Ana Sayfa</a>
                <span class="text-gray-300">|</span>
                <select id="lang-select" class="text-[10px] font-bold text-primary bg-transparent outline-none cursor-pointer uppercase border border-primary/20 rounded px-1">
                    <option value="tr">TR</option>
                    <option value="en">EN</option>
                    <option value="ru">RU</option>
                    <option value="el">EL</option>
                </select>
            </div>
        </div>
        <div class="flex-1 flex justify-end">
            <div id="auth-button" class="w-8 h-8 flex items-center justify-center">
                <button id="login-btn" class="text-xs text-primary font-medium cursor-pointer"><i class="ri-google-fill ri-lg"></i></button>
                <div id="profile-container" class="hidden"><img id="profile-img" src="" class="w-8 h-8 rounded-full cursor-pointer"></div>
            </div>
        </div>
    </header>

<div class="px-4 pt-28 mb-6">
    <div class="relative overflow-hidden rounded-2xl p-7 text-white shadow-xl border-b-4 border-[#ffd300]" 
         style="background: radial-gradient(circle at center, #6b46e5 0%, #4a329d 100%);">
        <div class="mb-6">
            <h2 class="text-2xl font-black tracking-tight leading-none uppercase">
                <span data-i18n="heroTitle">Åeffaf FiyatlandÄ±rma</span> <br>
                <span class="text-[#ffd300] text-lg font-bold italic opacity-90" data-i18n="heroSub">SÃ¼rpriz Maliyetlere Son</span>
            </h2>
        </div>
        <div class="grid grid-cols-1 gap-4">
            <div class="bg-white/10 backdrop-blur-md p-5 rounded-xl border border-white/10">
                <div class="flex items-center gap-4">
                    <div class="bg-white/20 w-12 h-12 rounded-lg flex items-center justify-center border border-white/30"><i class="ri-box-3-line text-[#ffd300] text-2xl"></i></div>
                    <div>
                        <p class="text-[11px] uppercase tracking-widest opacity-70 font-bold" data-i18n="scopeLabel">Hizmet KapsamÄ±</p>
                        <p class="text-lg font-extrabold text-white" data-i18n="scopeDetail">GÃ¼mrÃ¼k + Kargo + Nakliye</p>
                    </div>
                </div>
                <div class="mt-3 pt-3 border-t border-white/10 text-[#ffd300] font-bold text-sm flex items-center gap-2">
                    <i class="ri-checkbox-circle-fill"></i><span data-i18n="allInOne">TÃœM SÃœREÃ‡ TEK FÄ°YATA DAHÄ°LDÄ°R</span>
                </div>
            </div>
            <div class="grid grid-cols-1 gap-3 px-1">
                <div class="flex items-center gap-3 text-sm opacity-90 font-medium"><i class="ri-arrow-right-s-line text-[#ffd300]"></i><span data-i18n="feat1">Ekstra gÃ¼mrÃ¼k vergisi talep edilmez.</span></div>
                <div class="flex items-center gap-3 text-sm opacity-90 font-medium"><i class="ri-arrow-right-s-line text-[#ffd300]"></i><span data-i18n="feat2">Hesaplanan tutar net teslimat fiyatÄ±dÄ±r.</span></div>
                <div class="flex items-center gap-3 text-sm opacity-90 font-medium"><i class="ri-arrow-right-s-line text-[#ffd300]"></i><span data-i18n="feat3">TÃ¼m operasyonel sÃ¼reÃ§ler tarafÄ±mÄ±zca yÃ¶netilir.</span></div>
            </div>
        </div>
        <div class="mt-6 flex items-center justify-center gap-2 text-[10px] font-bold uppercase tracking-widest opacity-60 border-t border-white/5 pt-4">
            <i class="ri-shield-check-line text-lg"></i><span data-i18n="intlStandards">UluslararasÄ± TaÅŸÄ±ma StandartlarÄ±</span>
        </div>
    </div>
</div>

<div class="grid grid-cols-1 gap-4 px-4 mb-8">
    <a href="getirhome.html" class="bg-[#ffd300] shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 border border-[#ffd300] hover:bg-[#ffdf00] transition-all">
        <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center mb-1 shadow-sm overflow-hidden p-1">
            <img src="getirhome-logo.png" alt="GetirHome" class="w-full h-full object-contain">
        </div>
        <span class="text-sm font-bold text-gray-900">GetirHome</span>
    </a>
    <button id="calculate-btn" class="bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 border border-gray-100 hover:border-primary/20 transition-all">
        <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-calculator-line ri-xl text-primary"></i></div>
        <span class="text-sm font-medium" data-i18n="orderNow">SipariÅŸ Ver</span>
    </button>
    <a href="https://getirkibris.com/sepet.html" class="relative bg-white shadow-md p-4 rounded-button flex flex-col items-center justify-center h-32 border border-gray-100">
        <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2"><i class="ri-shopping-cart-line ri-xl text-primary"></i></div>
        <span class="text-sm font-medium" data-i18n="myCart">Sepetim</span>
        <span id="cart-badge" class="absolute bg-red-500 text-white text-xs font-bold rounded-full h-4 w-4 flex items-center justify-center hidden" style="top: 10px; right: 10px;">0</span>
    </a>
</div>

<section id="calculator-section" class="bg-white rounded-lg shadow-lg mx-auto p-6 mb-8 max-w-2xl fade-in hidden">
    <h2 class="text-xl font-semibold mb-4 text-primary" data-i18n="calcStep1">1. ÃœrÃ¼n Bilgilerini Girin</h2>
    <form id="calculator-form" class="space-y-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="orderMethod">SipariÅŸ YÃ¶ntemi*</label>
            <select id="order-method" required class="w-full p-2 border border-gray-300 rounded-md text-sm">
                <option value="service" data-i18n="meth1">ÃœrÃ¼nÃ¼ benim yerime siz sipariÅŸ edin</option>
                <option value="self" data-i18n="meth2">ÃœrÃ¼nÃ¼ ben alacaÄŸÄ±m, sadece kargo hizmeti istiyorum</option>
            </select>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="productLink">ÃœrÃ¼n Linki*</label>
            <input type="url" id="product-link" required class="w-full p-2 border border-gray-300 rounded-md" data-i18n-placeholder="linkPlc" placeholder="https://...">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="productPrice">ÃœrÃ¼n FiyatÄ± (â‚º)*</label>
            <input type="number" id="product-price" required class="w-full p-2 border border-gray-300 rounded-md" placeholder="150.00" step="any">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-1" data-i18n="category">Kategori*</label>
            <select id="product-category" required class="w-full p-2 border border-gray-300 rounded-md text-sm">
                <option value="" disabled selected data-i18n="loading">Kategoriler YÃ¼kleniyor...</option>
            </select>
        </div>
        <div id="calculation-result" class="mt-6 p-4 bg-gray-50 rounded-lg hidden">
            <h3 class="font-medium text-gray-800 mb-2" data-i18n="calcResult">ÃœrÃ¼n Getirme Maliyeti</h3>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between"><span id="result-price-label" data-i18n="priceLabel">ÃœrÃ¼n FiyatÄ±:</span><span id="result-price">0 â‚º</span></div>
                <div class="flex justify-between"><span data-i18n="feeLabel">Kategori Hizmet Bedeli:</span><span id="result-category-fee">0 â‚º</span></div>
                <div class="flex justify-between font-bold text-primary pt-2 border-t border-gray-200"><span data-i18n="totalLabel">Getirme Dahil Toplam:</span><span id="result-total">0 â‚º</span></div>
            </div>
        </div>
        <button type="submit" id="main-action-btn" class="w-full bg-primary text-white py-3 rounded-button font-semibold flex items-center justify-center gap-2">
            <i class="ri-calculator-line"></i><span data-i18n="calcBtn">Maliyeti Hesapla</span>
        </button>
    </form>
</section>

<h2 class="text-2xl font-extrabold text-gray-800 mb-4 px-4 border-l-4 border-primary ml-4" data-i18n="popularProducts">ğŸ›’ PopÃ¼ler ÃœrÃ¼nler</h2>
<div class="product-slider flex overflow-x-auto gap-4 p-4 snap-x snap-mandatory scrollbar-hide">
    <div class="product-card relative flex-shrink-0 w-[280px] shadow-lg rounded-2xl overflow-hidden border border-gray-100 bg-white snap-start">
        <div class="absolute top-3 left-3 z-10"><span class="bg-green-500 text-white text-[9px] font-bold px-2 py-1 rounded-md flex items-center gap-1 uppercase"><i class="ri-truck-fill"></i> <span data-i18n="freeShip">ÃœCRETSÄ°Z KARGO</span></span></div>
        <div class="h-48 bg-gray-50 flex items-center justify-center p-4"><img src="https://omhucph.com/cdn/shop/files/Sommer2025_omhu4754_POSO_40_sRGB_Low.png?v=1761298437&width=1900" class="max-h-full object-contain mix-blend-multiply" loading="lazy"></div>
        <div class="p-4 text-center">
            <h3 class="text-sm font-bold text-gray-800 truncate" data-i18n="p1Name">Legom Koltuk</h3>
            <p class="text-[10px] text-gray-500 uppercase mb-2" data-i18n="pFrom">Getir Home'dan GÃ¶nderim</p>
            <div class="mb-3"><p class="text-lg font-black text-red-600">19.000,00 â‚º</p><p class="text-[9px] font-bold text-primary mt-1 uppercase bg-primary/5 py-1 rounded-full"><i class="ri-checkbox-circle-fill"></i> <span data-i18n="allIncl">GÃ¼mrÃ¼k + Kargo Dahil</span></p></div>
            <a href="getirhome.html?category=Legom+Koltuk" class="block w-full bg-primary text-white text-sm font-bold py-2 rounded-lg" data-i18n="buyNow">SatÄ±n Al</a>
        </div>
    </div>
    <div class="product-card relative flex-shrink-0 w-[280px] shadow-lg rounded-2xl overflow-hidden border border-gray-100 bg-white snap-start">
        <div class="absolute top-3 left-3 z-10"><span class="bg-green-500 text-white text-[9px] font-bold px-2 py-1 rounded-md flex items-center gap-1 uppercase"><i class="ri-truck-fill"></i> <span data-i18n="freeShip">ÃœCRETSÄ°Z KARGO</span></span></div>
        <div class="h-48 bg-gray-50 flex items-center justify-center p-4"><img src="https://omhucph.com/cdn/shop/files/Omhu126018_W_CREAM_WHITE_-_5769_1.png?v=1761578226&width=1536" class="max-h-full object-contain mix-blend-multiply" loading="lazy"></div>
        <div class="p-4 text-center">
            <h3 class="text-sm font-bold text-gray-800 truncate" data-i18n="p2Name">Legom XL Koltuk</h3>
            <p class="text-[10px] text-gray-500 uppercase mb-2" data-i18n="pFrom">Getir Home'dan GÃ¶nderim</p>
            <div class="mb-3"><p class="text-lg font-black text-red-600">32.000,00 â‚º</p><p class="text-[9px] font-bold text-primary mt-1 uppercase bg-primary/5 py-1 rounded-full"><i class="ri-checkbox-circle-fill"></i> <span data-i18n="allIncl">GÃ¼mrÃ¼k + Kargo Dahil</span></p></div>
            <a href="getirhome.html?view=detail&id=4EB3NPv3gcV20oDbgH1S" class="block w-full bg-primary text-white text-sm font-bold py-2 rounded-lg" data-i18n="buyNow">SatÄ±n Al</a>
        </div>
    </div>
</div>

<div class="px-4 mb-8">
    <h3 class="text-lg font-semibold mb-4" data-i18n="popularSites">PopÃ¼ler AlÄ±ÅŸveriÅŸ Siteleri</h3>
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
        <a href="https://www.trendyol.com" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100"><img src="https://www.freelogovectors.net/wp-content/uploads/2024/01/trendyol_logo-freelogovectors.net_.png" class="w-16 h-16 object-contain"></a>
        <a href="https://www.hepsiburada.com" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100"><img src="https://www.ideasoft.com.tr/wp-content/uploads/2022/05/Hepsiburada-Logo-Transparan.png" class="w-16 h-16 object-contain"></a>
        <a href="https://www.n11.com" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100"><img src="https://upload.wikimedia.org/wikipedia/commons/6/60/N11_logo.svg" class="w-16 h-16 object-contain"></a>
        <a href="https://www.amazon.com.tr" target="_blank" class="bg-white rounded-lg shadow-sm p-3 h-20 flex items-center justify-center border border-gray-100"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTZvIiXt3ogobFi7dC0k1dMgpNvrwiTQl6cbA&s" class="w-16 h-16 object-contain"></a>
    </div>
</div>

<div class="mt-8 bg-gray-50 p-6 rounded-xl shadow-sm mx-4">
    <h3 class="text-xl font-semibold mb-3 text-gray-800" data-i18n="methodsTitle">SipariÅŸ YÃ¶ntemleri</h3>
    <p class="text-gray-700 mb-4 text-sm" data-i18n="methodsDesc">Getir KÄ±brÄ±sâ€™ta iki farklÄ± sipariÅŸ yÃ¶ntemiyle hizmet veriyoruz:</p>
    <div class="space-y-6">
        <div class="bg-white p-4 rounded-lg shadow">
            <h4 class="font-semibold text-lg text-indigo-700 mb-2" data-i18n="meth1Title">1ï¸âƒ£ ÃœrÃ¼nÃ¼ Benim Yerime SipariÅŸ Edin</h4>
            <p class="text-gray-700 text-sm" data-i18n="meth1Desc">ÃœrÃ¼nÃ¼ sizin yerinize biz sipariÅŸ ediyoruz. Ã–demeyi bize yapÄ±yorsunuz, tÃ¼m sÃ¼reci biz takip ediyoruz.</p>
        </div>
        <div class="bg-white p-4 rounded-lg shadow">
            <h4 class="font-semibold text-lg text-indigo-700 mb-2" data-i18n="meth2Title">2ï¸âƒ£ ÃœrÃ¼nÃ¼ Ben AlacaÄŸÄ±m Sadece Kargo Hizmeti Ä°stiyorum</h4>
            <div class="bg-gray-100 p-3 rounded-lg mt-3 text-xs">
                <p class="font-semibold" data-i18n="trAddressLabel">Getir KÄ±brÄ±s TÃ¼rkiye Adresi:</p>
                <p><strong>Adres:</strong> AydÄ±n, Nazilli, Bozyurt Mah. Kanal ÃœstÃ¼ 3281 sk. No:3 <br><strong>Tel:</strong> +90 547 190 19 88 | Emrah Kutlu</p>
            </div>
        </div>
    </div>
</div>

<div class="mt-6 px-4">
    <h4 class="text-lg font-semibold mb-4" data-i18n="warehouseTitle">KÄ±brÄ±s Depo Adresimiz</h4>
    <div class="space-y-4 text-sm text-gray-600">
        <div class="flex items-start gap-3"><i class="ri-map-pin-2-line text-primary"></i><span>AlaykÃ¶y Sanayi BÃ¶lgesi 1.Etap, LefkoÅŸa</span></div>
        <div class="flex items-start gap-3"><i class="ri-phone-line text-primary"></i><span>+90 533 860 71 82</span></div>
    </div>
</div>

<div class="mt-8 px-4 pb-20 text-center border-t pt-8">
    <div class="space-x-4">
        <a href="gizlilik-politikasi.html" class="text-xs text-gray-600" data-i18n="privacy">Gizlilik PolitikasÄ±</a>
        <a href="kullanim-sartlari.html" class="text-xs text-gray-600" data-i18n="terms">KullanÄ±m ÅartlarÄ±</a>
        <a href="sss.html" class="text-xs text-gray-600" data-i18n="faq">S.S.S.</a>
    </div>
</div>

<a href="https://wa.me/905471901988" target="_blank" class="fixed bottom-20 right-4 z-50 bg-[#25D366] rounded-full shadow-lg flex items-center justify-center p-6"><i class="ri-whatsapp-line ri-xl text-white"></i></a>

<div id="login-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-[100] hidden">
    <div class="bg-white rounded-lg p-8 w-full max-w-sm m-4 relative fade-in">
        <button id="close-login-modal" class="absolute top-4 right-4 text-gray-400"><i class="ri-close-line ri-lg"></i></button>
        <div class="text-center mb-6"><h3 class="text-2xl font-bold" data-i18n="welcome">HoÅŸ Geldiniz!</h3></div>
        <button id="google-login-btn" class="w-full flex items-center justify-center gap-3 border rounded-button py-3 font-semibold hover:bg-gray-50"><i class="ri-google-fill text-red-500"></i><span data-i18n="googleLogin">Google ile GiriÅŸ Yap</span></button>
    </div>
</div>

<div id="profile-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-[100] hidden">
    <div class="bg-white rounded-lg p-8 w-full max-w-sm m-4 relative fade-in">
        <h3 class="text-2xl font-bold text-center mb-6" data-i18n="completeProf">Profilinizi TamamlayÄ±n</h3>
        <form id="profile-form" class="space-y-4">
            <div><label class="block text-sm font-medium" data-i18n="fullName">Ad Soyad*</label><input type="text" id="full-name-input" required class="w-full p-2 border rounded-md"></div>
            <div><label class="block text-sm font-medium" data-i18n="phone">Telefon*</label><input type="tel" id="phone-input" required class="w-full p-2 border rounded-md"></div>
            <div><label class="block text-sm font-medium" data-i18n="address">Adres*</label><textarea id="address-input" required rows="2" class="w-full p-2 border rounded-md"></textarea></div>
            <button type="submit" class="w-full bg-primary text-white py-3 rounded-button font-semibold" data-i18n="save">Kaydet</button>
        </form>
    </div>
</div>

<div id="auth-required-modal" class="fixed inset-0 bg-black/60 flex items-center justify-center z-[100] hidden">
    <div class="bg-white rounded-lg p-8 w-full max-w-sm m-4 text-center fade-in">
        <i class="ri-lock-line ri-2x text-red-500 mb-4 block"></i>
        <h3 class="text-xl font-bold" data-i18n="loginReq">GiriÅŸ Gerekli</h3>
        <button id="auth-modal-login-btn" class="w-full bg-primary text-white py-2 mt-4 rounded-button" data-i18n="login">GiriÅŸ Yap</button>
        <button id="close-auth-modal" class="mt-2 text-gray-500" data-i18n="close">Kapat</button>
    </div>
</div>

<div id="toast" class="fixed bottom-24 right-6 bg-gray-800 text-white px-5 py-3 rounded-lg shadow-xl opacity-0 transition-all duration-300 z-[110] transform translate-y-4"><span id="toast-message"></span></div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
    import { getFirestore, doc, getDoc, setDoc, collection, addDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyCHms5Y5x-KOu3Y43FrfRoljmW_4m3H4yY",
        authDomain: "kibris-6b4f7.firebaseapp.com",
        projectId: "kibris-6b4f7",
        storageBucket: "kibris-6b4f7.firebasestorage.app",
        messagingSenderId: "141262926171",
        appId: "1:141262926171:web:07226845e51d4bbc0dea7e"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    let cartUnsubscribe = null;
    let pricingSettings = {};

    const translations = {
        tr: {
            navHome: "Ana Sayfa", heroTitle: "Åeffaf FiyatlandÄ±rma", heroSub: "SÃ¼rpriz Maliyetlere Son",
            scopeLabel: "Hizmet KapsamÄ±", scopeDetail: "GÃ¼mrÃ¼k + Kargo + Nakliye", allInOne: "TÃœM SÃœREÃ‡ TEK FÄ°YATA DAHÄ°LDÄ°R",
            feat1: "Ekstra gÃ¼mrÃ¼k vergisi talep edilmez.", feat2: "Hesaplanan tutar net teslimat fiyatÄ±dÄ±r.", feat3: "TÃ¼m operasyonel sÃ¼reÃ§ler tarafÄ±mÄ±zca yÃ¶netilir.",
            orderNow: "SipariÅŸ Ver", myCart: "Sepetim", buyNow: "SatÄ±n Al", freeShip: "ÃœCRETSÄ°Z KARGO",
            calcStep1: "1. ÃœrÃ¼n Bilgilerini Girin", orderMethod: "SipariÅŸ YÃ¶ntemi*", meth1: "ÃœrÃ¼nÃ¼ benim yerime siz sipariÅŸ edin", meth2: "ÃœrÃ¼nÃ¼ ben alacaÄŸÄ±m, sadece kargo hizmeti istiyorum",
            productLink: "ÃœrÃ¼n Linki*", linkPlc: "ÃœrÃ¼n linkini yapÄ±ÅŸtÄ±rÄ±n", productPrice: "ÃœrÃ¼n FiyatÄ± (â‚º)*", category: "Kategori*", loading: "YÃ¼kleniyor...",
            calcResult: "ÃœrÃ¼n Getirme Maliyeti", priceLabel: "ÃœrÃ¼n FiyatÄ±:", feeLabel: "Kategori Hizmet Bedeli:", totalLabel: "Getirme Dahil Toplam:",
            calcBtn: "Maliyeti Hesapla", addToCart: "Sepete Ekle", popularProducts: "ğŸ›’ PopÃ¼ler ÃœrÃ¼nler", p1Name: "Legom Koltuk", p2Name: "Legom XL Koltuk", pFrom: "Getir Home'dan GÃ¶nderim", allIncl: "GÃ¼mrÃ¼k + Kargo Dahil",
            warehouseTitle: "KÄ±brÄ±s Depo Adresimiz", privacy: "Gizlilik PolitikasÄ±", terms: "KullanÄ±m ÅartlarÄ±", faq: "S.S.S.", methodsTitle: "SipariÅŸ YÃ¶ntemleri", intlStandards: "UluslararasÄ± TaÅŸÄ±ma StandartlarÄ±",
            welcome: "HoÅŸ Geldiniz!", googleLogin: "Google ile GiriÅŸ Yap", fullName: "Ad Soyad*", phone: "Telefon*", address: "Adres*", save: "Kaydet", loginReq: "GiriÅŸ Gerekli", login: "GiriÅŸ Yap", close: "Kapat"
        },
        en: {
            navHome: "Home", heroTitle: "Transparent Pricing", heroSub: "No More Surprise Costs",
            scopeLabel: "Service Scope", scopeDetail: "Customs + Cargo + Shipping", allInOne: "ALL PROCESSES INCLUDED IN ONE PRICE",
            feat1: "No extra customs tax requested.", feat2: "Calculated amount is net delivery price.", feat3: "All operational processes are managed by us.",
            orderNow: "Order Now", myCart: "My Cart", buyNow: "Buy Now", freeShip: "FREE SHIPPING",
            calcStep1: "1. Enter Product Details", orderMethod: "Order Method*", meth1: "Order on my behalf", meth2: "I only need shipping service",
            productLink: "Product Link*", linkPlc: "Paste product link here", productPrice: "Product Price (â‚º)*", category: "Category*", loading: "Loading...",
            calcResult: "Delivery Cost Calculation", priceLabel: "Product Price:", feeLabel: "Service Category Fee:", totalLabel: "Total Delivery Price:",
            calcBtn: "Calculate Cost", addToCart: "Add to Cart", popularProducts: "ğŸ›’ Popular Products", p1Name: "Legom Sofa", p2Name: "Legom XL Sofa", pFrom: "Shipping via Getir Home", allIncl: "Customs + Cargo Included",
            warehouseTitle: "Our Cyprus Warehouse", privacy: "Privacy Policy", terms: "Terms of Use", faq: "F.A.Q.", methodsTitle: "Order Methods", intlStandards: "International Transport Standards",
            welcome: "Welcome!", googleLogin: "Login with Google", fullName: "Full Name*", phone: "Phone*", address: "Address*", save: "Save", loginReq: "Login Required", login: "Login", close: "Close"
        },
        ru: {
            navHome: "Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ", heroTitle: "ĞŸÑ€Ğ¾Ğ·Ñ€Ğ°Ñ‡Ğ½Ñ‹Ğµ Ñ†ĞµĞ½Ñ‹", heroSub: "ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… ÑĞºÑ€Ñ‹Ñ‚Ñ‹Ñ… Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ĞµĞ¹",
            scopeLabel: "ĞĞ±ÑŠĞµĞ¼ ÑƒÑĞ»ÑƒĞ³", scopeDetail: "Ğ¢Ğ°Ğ¼Ğ¾Ğ¶Ğ½Ñ + Ğ“Ñ€ÑƒĞ· + Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°", allInOne: "Ğ’Ğ¡Ğ• Ğ’ĞšĞ›Ğ®Ğ§Ğ•ĞĞ Ğ’ ĞĞ”ĞĞ£ Ğ¦Ğ•ĞĞ£",
            feat1: "ĞĞ¸ĞºĞ°ĞºĞ¸Ñ… Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ².", feat2: "Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ğ½Ğ½Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° â€” Ğ¸Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ Ñ†ĞµĞ½Ğ°.", feat3: "ĞœÑ‹ Ğ±ĞµÑ€ĞµĞ¼ Ğ½Ğ° ÑĞµĞ±Ñ Ğ²ÑĞµ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑÑ‹.",
            orderNow: "Ğ—Ğ°ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ", myCart: "ĞšĞ¾Ñ€Ğ·Ğ¸Ğ½Ğ°", buyNow: "ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ", freeShip: "Ğ‘Ğ•Ğ¡ĞŸĞ›ĞĞ¢ĞĞĞ¯ Ğ”ĞĞ¡Ğ¢ĞĞ’ĞšĞ",
            calcStep1: "1. Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°", orderMethod: "Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ± Ğ·Ğ°ĞºĞ°Ğ·Ğ°*", meth1: "Ğ—Ğ°ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ·Ğ° Ğ¼ĞµĞ½Ñ", meth2: "ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ° Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ°",
            productLink: "Ğ¡ÑÑ‹Ğ»ĞºĞ° Ğ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€*", linkPlc: "Ğ’ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ ÑÑÑ‹Ğ»ĞºÑƒ Ğ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€", productPrice: "Ğ¦ĞµĞ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ° (â‚º)*", category: "ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ*", loading: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...",
            calcResult: "Ğ Ğ°ÑÑ‡ĞµÑ‚ ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¸", priceLabel: "Ğ¦ĞµĞ½Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ°:", feeLabel: "ĞšĞ¾Ğ¼Ğ¸ÑÑĞ¸Ñ Ğ·Ğ° ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ:", totalLabel: "Ğ˜Ñ‚Ğ¾Ğ³Ğ¾ Ñ Ğ´Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ¾Ğ¹:",
            calcBtn: "Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ", addToCart: "Ğ’ ĞºĞ¾Ñ€Ğ·Ğ¸Ğ½Ñƒ", popularProducts: "ğŸ›’ ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹", p1Name: "Ğ”Ğ¸Ğ²Ğ°Ğ½ Legom", p2Name: "Ğ”Ğ¸Ğ²Ğ°Ğ½ Legom XL", pFrom: "Ğ”Ğ¾ÑÑ‚Ğ°Ğ²ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Getir Home", allIncl: "Ğ¢Ğ°Ğ¼Ğ¾Ğ¶Ğ½Ñ + Ğ“Ñ€ÑƒĞ· Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ñ‹",
            warehouseTitle: "ĞĞ°Ñˆ ÑĞºĞ»Ğ°Ğ´ Ğ½Ğ° ĞšĞ¸Ğ¿Ñ€Ğµ", privacy: "ĞšĞ¾Ğ½Ñ„Ğ¸Ğ´ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ", terms: "Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ", faq: "Ğ’Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹", methodsTitle: "Ğ¡Ğ¿Ğ¾ÑĞ¾Ğ±Ñ‹ Ğ·Ğ°ĞºĞ°Ğ·Ğ°", intlStandards: "ĞœĞµĞ¶Ğ´ÑƒĞ½Ğ°Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğµ ÑÑ‚Ğ°Ğ½Ğ´Ğ°Ñ€Ñ‚Ñ‹",
            welcome: "Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ!", googleLogin: "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸ Ñ‡ĞµÑ€ĞµĞ· Google", fullName: "Ğ˜Ğ¼Ñ Ğ¤Ğ°Ğ¼Ğ¸Ğ»Ğ¸Ñ*", phone: "Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½*", address: "ĞĞ´Ñ€ĞµÑ*", save: "Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ñ‚ÑŒ", loginReq: "Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ Ğ²Ñ…Ğ¾Ğ´", login: "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸", close: "Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ"
        },
        el: {
            navHome: "Î‘ÏÏ‡Î¹ÎºÎ®", heroTitle: "Î”Î¹Î±Ï†Î±Î½Î®Ï‚ Î¤Î¹Î¼Î¿Î»ÏŒÎ³Î·ÏƒÎ·", heroSub: "Î¤Î­Î»Î¿Ï‚ ÏƒÏ„Î¿ ÎšÏÏ…Ï†ÏŒ ÎšÏŒÏƒÏ„Î¿Ï‚",
            scopeLabel: "Î•ÏÏÎ¿Ï‚ Î¥Ï€Î·ÏÎµÏƒÎ¹ÏÎ½", scopeDetail: "Î¤ÎµÎ»Ï‰Î½ÎµÎ¯Î¿ + ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬ + ÎÎ±Ï…Ï„Î¹Î»Î¯Î±", allInOne: "ÎŸÎ›Î•Î£ ÎŸÎ™ Î”Î™Î‘Î”Î™ÎšÎ‘Î£Î™Î•Î£ Î Î•Î¡Î™Î›Î‘ÎœÎ’Î‘ÎÎŸÎÎ¤Î‘Î™ Î£Î• ÎœÎ™Î‘ Î¤Î™ÎœÎ—",
            feat1: "Î”ÎµÎ½ Î±Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ ÎµÏ€Î¹Ï€Î»Î­Î¿Î½ Ï„ÎµÎ»Ï‰Î½ÎµÎ¹Î±ÎºÏŒÏ‚ Ï†ÏŒÏÎ¿Ï‚.", feat2: "Î¤Î¿ Ï…Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼Î­Î½Î¿ Ï€Î¿ÏƒÏŒ ÎµÎ¯Î½Î±Î¹ Î· ÎºÎ±Î¸Î±ÏÎ® Ï„Î¹Î¼Î® Ï€Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚.", feat3: "ÎŒÎ»ÎµÏ‚ Î¿Î¹ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¹ÎºÎ­Ï‚ Î´Î¹Î±Î´Î¹ÎºÎ±ÏƒÎ¯ÎµÏ‚ Î´Î¹Î±Ï‡ÎµÎ¹ÏÎ¯Î¶Î¿Î½Ï„Î±Î¹ Î±Ï€ÏŒ ÎµÎ¼Î¬Ï‚.",
            orderNow: "Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±", myCart: "ÎšÎ±Î»Î¬Î¸Î¹", buyNow: "Î‘Î³Î¿ÏÎ¬", freeShip: "Î”Î©Î¡Î•Î‘Î ÎœÎ•Î¤Î‘Î¦ÎŸÎ¡Î™ÎšÎ‘",
            calcStep1: "1. Î•Î¹ÏƒÎ¬Î³ÎµÏ„Îµ Î£Ï„Î¿Î¹Ï‡ÎµÎ¯Î± Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚", orderMethod: "ÎœÎ­Î¸Î¿Î´Î¿Ï‚ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚*", meth1: "Î Î±ÏÎ±Î³Î³ÎµÎ¯Î»ÎµÏ„Îµ Î³Î¹Î± Î»Î¿Î³Î±ÏÎ¹Î±ÏƒÎ¼ÏŒ Î¼Î¿Ï…", meth2: "Î§ÏÎµÎ¹Î¬Î¶Î¿Î¼Î±Î¹ Î¼ÏŒÎ½Î¿ Î¼ÎµÏ„Î±Ï†Î¿ÏÎ¬",
            productLink: "Î£ÏÎ½Î´ÎµÏƒÎ¼Î¿Ï‚ Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚*", linkPlc: "Î•Ï€Î¹ÎºÎ¿Î»Î»Î®ÏƒÏ„Îµ Ï„Î¿Î½ ÏƒÏÎ½Î´ÎµÏƒÎ¼Î¿", productPrice: "Î¤Î¹Î¼Î® Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚ (â‚º)*", category: "ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±*", loading: "Î¦ÏŒÏÏ„Ï‰ÏƒÎ·...",
            calcResult: "Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚ ÎšÏŒÏƒÏ„Î¿Ï…Ï‚ Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚", priceLabel: "Î¤Î¹Î¼Î® Î ÏÎ¿ÏŠÏŒÎ½Ï„Î¿Ï‚:", feeLabel: "Î§ÏÎ­Ï‰ÏƒÎ· ÎšÎ±Ï„Î·Î³Î¿ÏÎ¯Î±Ï‚:", totalLabel: "Î£Ï…Î½Î¿Î»Î¹ÎºÎ® Î¤Î¹Î¼Î® Î Î±ÏÎ¬Î´Î¿ÏƒÎ·Ï‚:",
            calcBtn: "Î¥Ï€Î¿Î»Î¿Î³Î¹ÏƒÎ¼ÏŒÏ‚", addToCart: "Î ÏÎ¿ÏƒÎ¸Î®ÎºÎ· ÏƒÏ„Î¿ ÎšÎ±Î»Î¬Î¸Î¹", popularProducts: "ğŸ›’ Î”Î·Î¼Î¿Ï†Î¹Î»Î® Î ÏÎ¿ÏŠÏŒÎ½Ï„Î±", p1Name: "ÎšÎ±Î½Î±Ï€Î­Ï‚ Legom", p2Name: "ÎšÎ±Î½Î±Ï€Î­Ï‚ Legom XL", pFrom: "Î‘Ï€Î¿ÏƒÏ„Î¿Î»Î® Î¼Î­ÏƒÏ‰ Getir Home", allIncl: "Î ÎµÏÎ¹Î»Î±Î¼Î²Î¬Î½ÎµÏ„Î±Î¹ Î¤ÎµÎ»Ï‰Î½ÎµÎ¯Î¿",
            warehouseTitle: "Î— Î‘Ï€Î¿Î¸Î®ÎºÎ· Î¼Î±Ï‚ ÏƒÏ„Î·Î½ ÎšÏÏ€ÏÎ¿", privacy: "Î Î¿Î»Î¹Ï„Î¹ÎºÎ® Î‘Ï€Î¿ÏÏÎ®Ï„Î¿Ï…", terms: "ÎŒÏÎ¿Î¹ Î§ÏÎ®ÏƒÎ·Ï‚", faq: "Î£Ï…Ï‡Î½Î­Ï‚ Î•ÏÏ‰Ï„Î®ÏƒÎµÎ¹Ï‚", methodsTitle: "ÎœÎ­Î¸Î¿Î´Î¿Î¹ Î Î±ÏÎ±Î³Î³ÎµÎ»Î¯Î±Ï‚", intlStandards: "Î”Î¹ÎµÎ¸Î½Î® Î ÏÏŒÏ„Ï…Ï€Î± ÎœÎµÏ„Î±Ï†Î¿ÏÎ¬Ï‚",
            welcome: "ÎšÎ±Î»ÏÏ‚ Î®ÏÎ¸Î±Ï„Îµ!", googleLogin: "Î•Î¯ÏƒÎ¿Î´Î¿Ï‚ Î¼Îµ Google", fullName: "ÎŸÎ½Î¿Î¼Î±Ï„ÎµÏ€ÏÎ½Ï…Î¼Î¿*", phone: "Î¤Î·Î»Î­Ï†Ï‰Î½Î¿*", address: "Î”Î¹ÎµÏÎ¸Ï…Î½ÏƒÎ·*", save: "Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·", loginReq: "Î‘Ï€Î±Î¹Ï„ÎµÎ¯Ï„Î±Î¹ Î•Î¯ÏƒÎ¿Î´Î¿Ï‚", login: "Î•Î¯ÏƒÎ¿Î´Î¿Ï‚", close: "ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿"
        }
    };

    function changeLanguage(lang) {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[lang][key]) el.textContent = translations[lang][key];
        });
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            if (translations[lang][key]) el.placeholder = translations[lang][key];
        });
        localStorage.setItem('prefLang', lang);
        const btn = document.getElementById('main-action-btn');
        if (btn && btn.querySelector('span')) {
            btn.querySelector('span').textContent = document.getElementById('calculation-result').classList.contains('hidden') ? translations[lang].calcBtn : translations[lang].addToCart;
        }
    }

    document.getElementById('lang-select').onchange = (e) => changeLanguage(e.target.value);
    const savedLang = localStorage.getItem('prefLang') || 'tr';
    document.getElementById('lang-select').value = savedLang;
    changeLanguage(savedLang);

    async function loadPricingSettings() {
        try {
            const snap = await getDoc(doc(db, "settings", "pricing"));
            pricingSettings = snap.exists() ? snap.data() : { categoryRates: { furniture: 0.7, clothing: 0.45, cosmetics: 0.7, stationery: 0.4 } };
        } catch (e) { pricingSettings = { categoryRates: { furniture: 0.7, clothing: 0.45, cosmetics: 0.7, stationery: 0.4 } }; }
        populateCategoryDropdown();
    }

    function populateCategoryDropdown() {
        const sel = document.getElementById('product-category');
        if (!sel) return;
        sel.innerHTML = `<option value="" disabled selected>${translations[savedLang].loading}</option>`;
        const names = { furniture: "Mobilya & Ev / Furniture", clothing: "Giyim & AyakkabÄ± / Clothing", cosmetics: "Kozmetik / Cosmetics", stationery: "Kitap / Stationery" };
        Object.keys(pricingSettings.categoryRates).forEach(k => {
            const opt = document.createElement('option'); opt.value = k; opt.textContent = names[k] || k; sel.appendChild(opt);
        });
    }

    onAuthStateChanged(auth, user => {
        if (user) {
            document.getElementById('login-btn').classList.add('hidden');
            document.getElementById('profile-container').classList.remove('hidden');
            document.getElementById('profile-img').src = user.photoURL;
            listenToCart(user.uid); checkUserProfile(user);
        } else {
            document.getElementById('login-btn').classList.remove('hidden');
            document.getElementById('profile-container').classList.add('hidden');
            if (cartUnsubscribe) cartUnsubscribe();
            document.getElementById('cart-badge').classList.add('hidden');
        }
    });

    document.getElementById('google-login-btn').onclick = () => signInWithPopup(auth, new GoogleAuthProvider()).then(() => document.getElementById('login-modal').classList.add('hidden'));
    document.getElementById('login-btn').onclick = () => document.getElementById('login-modal').classList.remove('hidden');
    document.getElementById('close-login-modal').onclick = () => document.getElementById('login-modal').classList.add('hidden');
    document.getElementById('profile-container').onclick = () => confirm('Ã‡Ä±kÄ±ÅŸ?') && signOut(auth);

    document.getElementById('calculate-btn').onclick = () => {
        const s = document.getElementById('calculator-section'); s.classList.remove('hidden'); s.scrollIntoView({behavior:'smooth'});
    };

    document.getElementById('calculator-form').onsubmit = async (e) => {
        e.preventDefault();
        const lang = document.getElementById('lang-select').value;
        const btn = document.getElementById('main-action-btn');
        if (btn.innerText.includes(translations[lang].calcBtn)) {
            const price = parseFloat(document.getElementById('product-price').value.toString().replace(/[^0-9.,]/g, '').replace(',', '.'));
            const cat = document.getElementById('product-category').value;
            const method = document.getElementById('order-method').value;
            const fee = price * (pricingSettings.categoryRates[cat] || 0);
            const total = (method === 'self') ? fee : price + fee;

            document.getElementById('result-price').textContent = price.toFixed(2) + " â‚º";
            document.getElementById('result-category-fee').textContent = fee.toFixed(2) + " â‚º";
            document.getElementById('result-total').textContent = total.toFixed(2) + " â‚º";
            document.getElementById('calculation-result').classList.remove('hidden');
            btn.querySelector('span').textContent = translations[lang].addToCart;
        } else {
            const user = auth.currentUser;
            if (!user) return document.getElementById('auth-required-modal').classList.remove('hidden');
            await addDoc(collection(db, 'users', user.uid, 'cart'), {
                productLink: document.getElementById('product-link').value,
                productPrice: parseFloat(document.getElementById('product-price').value),
                category: document.getElementById('product-category').value,
                orderMethod: document.getElementById('order-method').value,
                quantity: 1, addedAt: new Date()
            });
            location.href = 'sepet.html';
        }
    };

    function listenToCart(uid) {
        cartUnsubscribe = onSnapshot(collection(db, 'users', uid, 'cart'), s => {
            const b = document.getElementById('cart-badge');
            b.textContent = s.size; b.classList.toggle('hidden', s.size === 0);
        });
    }

    async function checkUserProfile(u) {
        const snap = await getDoc(doc(db, "users", u.uid));
        if (!snap.exists() || !snap.data().isProfileComplete) document.getElementById('profile-modal').classList.remove('hidden');
    }

    document.getElementById('profile-form').onsubmit = async (e) => {
        e.preventDefault();
        await setDoc(doc(db, "users", auth.currentUser.uid), {
            fullName: document.getElementById('full-name-input').value,
            phone: document.getElementById('phone-input').value,
            address: document.getElementById('address-input').value,
            isProfileComplete: true
        }, {merge:true});
        document.getElementById('profile-modal').classList.add('hidden');
    };

    loadPricingSettings();
    document.getElementById('close-auth-modal').onclick = () => document.getElementById('auth-required-modal').classList.add('hidden');
    document.getElementById('auth-modal-login-btn').onclick = () => { document.getElementById('auth-required-modal').classList.add('hidden'); document.getElementById('login-modal').classList.remove('hidden'); };
</script>
</body>
</html>
